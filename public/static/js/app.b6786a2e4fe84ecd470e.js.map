{"version":3,"sources":["webpack:///./src/App.vue?cc92","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/roleHandler/ElementStore.js","webpack:///./src/components/roleHandler/RoleController.js","webpack:///./src/components/roleHandler/setting.js","webpack:///./src/components/roleHandler/EventHandler.js","webpack:///./src/components/roleHandler/Util.js","webpack:///./src/components/roleHandler/CircleElement.js","webpack:///./src/components/roleHandler/RectElement.js","webpack:///./src/components/roleHandler/LineElement.js","webpack:///./src/components/roleHandler/BezierLineElement.js","webpack:///./src/components/roleHandler/ElementCreator.js","webpack:///./src/components/roleHandler/ProcessData.js","webpack:///src/components/CanvasDemo.vue","webpack:///./src/components/CanvasDemo.vue?8561","webpack:///./src/components/CanvasDemo.vue"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","key","to","_v","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","vue_esm","use","vue_router_esm","constantRouterMap","path","name","component","Promise","resolve","then","bind","e","router","scrollBehavior","y","routes","config","productionTip","el","components","App","template","ElementStore","RoleController","ctx","_this","canvas","pen","getContext","main_loop","clearRect","l","prototype","elements","length","living","draw","requestAnimationFrame","currentX","currentY","onDrag","x","eventType","translateX","translateY","shouldTransPen","translate","backToStart","resetData","saveLines","lines","_ElementStore$prototy","splice","apply","concat","toConsumableArray_default","saveElement","ele","push","getElements","type","eles","data","console","log","parseInt","Math","random","old_x","old_y","Setting","defaultBorder","defaultBorderColor","RectBgColor","RectWidth","RectHeight","CircleBgColor","CircleRadius","CircleHoverBgColor","CircleSelectColor","CircleTextColor","CircleTextHoverColor","CircleTextSelectColor","CircleTextFont","CircleTextSelectFont","lineWidth","LineColor","lineSelectWidth","lineSelectColor","lineHoverColor","lineLabelWidth","lineLabelHeight","lineLabelBg","lineTextMaxLength","lineLabelText","lineLabelTextFont","lineLabelTextSelectFont","hoverElementId","SelectElementId","bevel","bevelAngle","PI","setting","EventHandler","activeEle","startDragEvent","startTime","clientList","listen","fn","trigger","Array","shift","call","arguments","fns","handleClick","event","caculate","alert","handleMouseDown","Date","getTime","isActive","offsetX","offsetY","handleMouseUp","onClick","handleMouseMove","update","Util","CircleElement","RectElement","LineElement","BezierLineElement","changeTragetElement","distanceX","abs","distanceY","distance","hypot_default","SinT","CosT","livingCycle","linkNum","beginPoint","endPoint","sqrt","beginPath","arc","fillStyle","fill","stroke","text","font","textAlign","textBaseline","fillText","closePath","vx","vy","addChildren","datas","ElementCreator","addElements","width","height","rect","bg","radius","strokeStyle","moveTo","lineTo","rotate","xa","xb","ya","yb","x1","y1","x2","y2","vertexX","vertexY","asin","sin","cos","rectWidth","rectHeight","rectOriginX","rectOriginY","rectbevel","rectInnerAngle","save","maxLength","rel","replace","substring","restore","x0","y0","x1x2","x0x1","x0x2","perimeterHalf","lineDistance","midX","midY","hypotSide","sinT","cosT","middlePoint","finalY","finalX","quadraticCurveTo","rotateText","x3","y3","CurveVertexX","CurveVertexY","parameterT","pow","types","circle","line","BezierLine","addElement","addLines","ProcessData","nodes","circles","c","ceil","assign_default","rects","relations","getLineType","getTargetPoint","startNode","endNode","roleHandler_ProcessData","CanvasDemo","_circleDatas","circleDatas","relationships","addEventListener","initCanvas","components_CanvasDemo","staticClass","value","on","click","addData","ref","Component","__webpack_exports__"],"mappings":"iKAGAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,eAAoBI,IAAA,QAAAF,OAAmBG,GAAA,OAA1IP,KAAoJQ,GAAA,aAApJR,KAAoJQ,GAAA,KAAAN,EAAA,eAAoDI,IAAA,QAAAF,OAAmBG,GAAA,YAA3NP,KAA0OQ,GAAA,aAA1OR,KAA0OQ,GAAA,KAAAN,EAAA,cAAAA,EAAA,wBAEnPO,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,OCJA,ODMAf,GATA,EAVA,SAAAgB,GACAF,EAAA,SAaA,KAEA,MAUA,8BEtBAG,EAAA,EAAIC,IAAIC,EAAA,GAED,IAAMC,IAELC,KAAM,IACNC,KAAM,aACNC,UAAW,kBACP,IAAAC,QAAA,SAAAC,SAAAC,KAAAZ,EAAAa,KAAA,iBAGJN,KAAM,SACNC,KAAM,QACNC,UAAW,kBACPT,EAAAc,EAAA,GAAAF,KAAAZ,EAAAa,KAAA,iBAGZE,EAAA,IAAmBV,EAAA,GAEfW,eAAgB,kBAASC,EAAG,IAC5BC,OAAQZ,ICjBZH,EAAA,EAAIgB,OAAOC,eAAgB,EAG3B,IAAIjB,EAAA,GACFkB,GAAI,OACJN,SACAO,YAAcC,IAAAxB,GACdyB,SAAU,wHCbL,SAASC,KCET,SAASC,EAAeC,GAAK,IAAAC,EAAAvC,KAChCA,KAAKwC,OAASF,EACdtC,KAAKyC,IAAMH,EAAII,WAAW,MAC1B1C,KAAK2C,UAAY,WACbJ,EAAKE,IAAIG,UAAU,EAAG,EAAG,KAAM,MAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IACxDT,EAAaU,UAAUC,SAASF,GAAGI,SACnCb,EAAaU,UAAUC,SAASF,GAAGK,KAAKX,EAAKE,KAEjDU,sBAAsBZ,EAAKI,YAE/B3C,KAAK2C,YACL3C,KAAKoD,SAAW,EAChBpD,KAAKqD,SAAW,EAChBrD,KAAKsD,OAAS,SAACC,EAAG3B,EAAG4B,GACjB,GAAiB,QAAbA,EACAjB,EAAKa,SAAW,EAChBb,EAAKc,SAAW,MACb,CACH,IAAII,EAAaF,EAAIhB,EAAKa,SACtBM,EAAa9B,EAAIW,EAAKc,SACtBM,GAAiB,EACjBtB,EAAeS,UAAUW,WAAaA,EAAa,GACnDpB,EAAeS,UAAUW,YAAcA,EACvClB,EAAKa,SAAWG,EAChBI,GAAiB,GAEjBF,EAAa,EAEbpB,EAAeS,UAAUY,WAAaA,EAAa,GACnDrB,EAAeS,UAAUY,YAAcA,EACvCnB,EAAKc,SAAWzB,EAChB+B,GAAiB,GAEjBD,EAAa,EAEbC,GACApB,EAAKE,IAAImB,UAAUH,EAAYC,KAI3C1D,KAAK6D,YAAc,WACftB,EAAKE,IAAImB,WAAWvB,EAAeS,UAAUW,YAAapB,EAAeS,UAAUY,YACnFrB,EAAeS,UAAUW,WAAa,EACtCpB,EAAeS,UAAUY,WAAa,EACtCtB,EAAaU,UAAUgB,aD9C/B1B,EAAaU,WACTC,YACAgB,UAAW,SAASC,GAAO,IAAAC,GACvBA,EAAA7B,EAAaU,UAAUC,UAASmB,OAAhCC,MAAAF,GAAuC,EAAG,GAA1CG,OAAAC,IAAgDL,MAEpDM,YAAa,SAAAC,GACTnC,EAAaU,UAAUC,SAASyB,KAAKD,IAEzCE,YAAa,SAAAC,GAET,IADA,IAAIC,KACK9B,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IACpDT,EAAaU,UAAUC,SAASF,GAAG+B,KAAKF,MAAQA,GAChDC,EAAKH,KAAKpC,EAAaU,UAAUC,SAASF,IAIlD,OADAgC,QAAQC,IAAIH,GACLA,GAEXb,UAAW,WACPe,QAAQC,IAAI,aACZ,IAAK,IAAIjC,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IACJ,UAAhDT,EAAaU,UAAUC,SAASF,GAAG+B,KAAKF,OACxCG,QAAQC,IAAI1C,EAAaU,UAAUC,SAASF,IAC5CT,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,EAAIwB,SACxC,GAAqB,IAAhBC,KAAKC,UAEd7C,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,EAAImD,SACxC,GAAqB,IAAhBC,KAAKC,UAEd7C,EAAaU,UAAUC,SAASF,GAAGqC,MAC/B9C,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,EAC5CnB,EAAaU,UAAUC,SAASF,GAAGsC,MAC/B/C,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,KCiB5DS,EAAeS,WACXW,WAAY,EACZC,WAAY,GCpDhB,IAAM0B,KACNA,EAAQtC,WACJuC,cAAe,GACfC,mBAAoB,OACpBC,YAAa,OACbC,UAAW,GACXC,WAAY,GACZC,cAAe,UACfC,aAAc,GACdC,mBAAoB,UACpBC,kBAAmB,UACnBC,gBAAiB,OACjBC,qBAAsB,UACtBC,sBAAuB,UACvBC,eAAgB,KAChBC,qBAAsB,KACtBC,UAAW,EACXC,UAAW,OACXC,gBAAiB,EACjBC,gBAAiB,UACjBC,eAAgB,UAChBC,eAAgB,GAChBC,gBAAiB,GACjBC,YAAa,UACbC,kBAAmB,EACnBC,cAAe,OACfC,kBAAmB,KACnBC,wBAAyB,KACzBC,eAAgB,EAChBC,gBAAiB,EACjBC,MAAO,GACPC,WAAYlC,KAAKmC,GAAK,GAE1B,IAAAC,EAAA,EC9BO,SAASC,KAChBA,EAAavE,WACTwE,UAAW,GACXC,gBACIjE,QAAQ,GAEZkE,UAAW,GACXC,cACAC,OAAQ,SAASpH,EAAKqH,GACbN,EAAavE,UAAU2E,WAAWnH,KACnC+G,EAAavE,UAAU2E,WAAWnH,OAEtC+G,EAAavE,UAAU2E,WAAWnH,GAAKkE,KAAKmD,IAEhDC,QAAS,WACL,IAAItH,EAAMuH,MAAM/E,UAAUgF,MAAMC,KAAKC,WACjCC,EAAMZ,EAAavE,UAAU2E,WAAWnH,GAC5C,IAAK2H,GAAsB,IAAfA,EAAIjF,OACZ,OAAO,EAEX,IAAK,IAAIH,EAAI,EAAGA,EAAIoF,EAAIjF,OAAQH,IAC5BoF,EAAIpF,GAAGsB,MAAMnE,KAAMgI,YAG3BE,YAAa,SAASC,GAClB,IAAK,IAAItF,EAAIT,EAAaU,UAAUC,SAASC,OAAS,EAAGH,GAAK,EAAGA,IACzDT,EAAaU,UAAUC,SAASF,GAAGuF,SAASD,IAC5CE,MAAM,OAIlBC,gBAAiB,SAASH,GACtB,IAAK,IAAItF,EAAIT,EAAaU,UAAUC,SAASC,OAAS,EAAGH,GAAK,EAAGA,IAC7D,GAAIT,EAAaU,UAAUC,SAASF,GAAGuF,SAASD,GAI5C,OAHAd,EAAavE,UAAU0E,WAAY,IAAIe,MAAOC,UAC9CnB,EAAavE,UAAUwE,UAAYlF,EAAaU,UAAUC,SAASF,QACnEwE,EAAavE,UAAUwE,UAAU1C,KAAK6D,UAAW,GAIjB,IAApCpB,EAAavE,UAAUwE,YAEvBD,EAAavE,UAAU8E,QAAQ,OAAQ,EAAG,EAAG,QAC7CP,EAAavE,UAAUyE,eAAejE,QAAS,EAC/C+D,EAAavE,UAAUyE,eAAemB,QAAUP,EAAMO,QACtDrB,EAAavE,UAAUyE,eAAeoB,QAAUR,EAAMQ,UAG9DC,cAAe,WAE6B,IAApCvB,EAAavE,UAAUwE,YACvB,IAAIiB,MAAOC,UAAYxI,KAAKwH,UAAY,KAExCH,EAAavE,UAAUwE,UAAUuB,UAEG,IAApCxB,EAAavE,UAAUwE,YACvBD,EAAavE,UAAUwE,UAAU1C,KAAK6D,UAAW,GAErDpB,EAAavE,UAAUyE,eAAejE,QAAS,EAC/CtD,KAAKsH,UAAY,IAErBwB,gBAAiB,SAASX,GACA,IAAlBnI,KAAKsH,WACLtH,KAAKsH,UAAUyB,OAAOZ,GAGtBd,EAAavE,UAAUyE,eAAejE,QACtC+D,EAAavE,UAAUQ,OAAO6E,GAElC,IAAK,IAAItF,EAAIT,EAAaU,UAAUC,SAASC,OAAS,EAAGH,GAAK,EAAGA,IAAK,CAClE,GAAIT,EAAaU,UAAUC,SAASF,GAAGuF,SAASD,GAG5C,YAFAf,EAAQtE,UAAUiE,eACd3E,EAAaU,UAAUC,SAASF,GAAG+B,KAAKvE,IAG5CwC,GAAKT,EAAaU,UAAUC,SAASC,OAAS,IAC9CoE,EAAQtE,UAAUiE,eAAiB,KAI/CzD,OAAQ,SAAS6E,GACb,IAAI5E,EAAI4E,EAAMO,QAAUrB,EAAavE,UAAUyE,eAAemB,QAC1D9G,EAAIuG,EAAMQ,QAAUtB,EAAavE,UAAUyE,eAAeoB,QAC9DtB,EAAavE,UAAU8E,QAAQ,OAAQrE,EAAG3B,8BCrF3C,SAASoH,KCGT,SAASC,EAAcrE,GAC1B5E,KAAKkF,MAAQN,EAAKrB,EAClBvD,KAAKmF,MAAQP,EAAKhD,EAClB5B,KAAKyI,UAAW,EAChBzI,KAAK4E,KAAOA,ECLT,SAASsE,EAAYtE,GACxB5E,KAAKkF,MAAQN,EAAKrB,EAClBvD,KAAKmF,MAAQP,EAAKhD,EAClB5B,KAAKyI,UAAW,EAChBzI,KAAK4E,KAAOA,ECLT,SAASuE,EAAYvE,GACxB5E,KAAK4E,KAAOA,ECDT,SAASwE,EAAkBxE,GAC9B5E,KAAK4E,KAAOA,EJDhBoE,EAAKlG,WACDuG,oBAAqB,SAAS9E,GAC1B,IAAK,IAAI1B,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IACxD,GACIT,EAAaU,UAAUC,SAASF,GAAG+B,KAAKvE,IAAMkE,EAAIK,KAAKvE,IACvD+B,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,EAC1C,CACE,IAAI+F,EAAYtE,KAAKuE,IACjBhF,EAAIK,KAAKrB,EAAInB,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,GAErDiG,EAAYxE,KAAKuE,IACjBhF,EAAIK,KAAKhD,EAAIQ,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,GAErD6H,EAAWC,IAAWJ,EAAWE,GACjCG,GACCpF,EAAIK,KAAKrB,EAAInB,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,GAAKkG,EAC3DG,GACCrF,EAAIK,KAAKhD,EAAIQ,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,GAAK6H,EAC3DA,EAAW,KACXrH,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,EACpCnB,EAAaU,UAAUC,SAASF,GAAG+B,KAAKrB,GACvC,GAAKkG,GAAYE,EAAO,GAC7BvH,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,EACpCQ,EAAaU,UAAUC,SAASF,GAAG+B,KAAKhD,GACvC,GAAK6H,GAAYG,EAAO,MAK7CC,YAAa,WAET,IADA,IAAIvC,EAAY,GACPzE,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IACpDT,EAAaU,UAAUC,SAASF,GAAG+B,KAAK6D,WACxCnB,EAAYlF,EAAaU,UAAUC,SAASF,IAGpD,GAAiB,IAAbyE,EACA,IAAK,IAAIzE,EAAI,EAAGA,EAAIT,EAAaU,UAAUC,SAASC,OAAQH,IAEpDT,EAAaU,UAAUC,SAASF,GAAG+B,KAAKkF,SACxCxC,EAAU1C,KAAKkF,SACf1H,EAAaU,UAAUC,SAASF,GAAG+B,KAAKvE,IAAMiH,EAAU1C,KAAKvE,IAE7D+B,EAAaU,UAAUC,SAASF,GAAG+B,KAK/C,IAAI0E,EAAYtE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GACjEiG,EAAYxE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GACjE6H,EAAWC,IAAWJ,EAAWE,GACjCG,GAAQ3J,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GAAKkG,EACzDG,EAAO5J,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,EACnD6H,EAAW,MACXzJ,KAAK4E,KAAKoF,SAASzG,EACfvD,KAAK4E,KAAKoF,SAASzG,GAAKkG,EAAW,KAAOE,EAAO,IACrD3J,KAAK4E,KAAKoF,SAASpI,EACf5B,KAAK4E,KAAKoF,SAASpI,GAAK6H,EAAW,KAAOG,EAAO,OCjDjEX,EAAcnG,WACVsF,SAAU,SAASD,GACf,IAAI5E,EAAI4E,EAAMO,QAAUrG,EAAeS,UAAUW,WAAazD,KAAK4E,KAAKrB,EACpE3B,EAAIuG,EAAMQ,QAAUtG,EAAeS,UAAUY,WAAa1D,KAAK4E,KAAKhD,EACxE,OAAIoD,KAAKiF,KAAK1G,EAAIA,EAAI3B,EAAIA,GAAKwF,EAAQtE,UAAU6C,cAMrDzC,KAAM,SAAST,GACXA,EAAIyH,YACJzH,EAAI0H,IACAnK,KAAK4E,KAAKrB,EACVvD,KAAK4E,KAAKhD,EACVwF,EAAQtE,UAAU6C,aAClB,EACU,EAAVX,KAAKmC,IACL,GAEJ1E,EAAI2H,UAAYhD,EAAQtE,UAAU4C,cAC9B1F,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAClCtE,EAAI2H,UAAYhD,EAAQtE,UAAU8C,oBAElC5F,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAClCvE,EAAI2H,UAAYhD,EAAQtE,UAAU+C,mBAEtCpD,EAAI4H,OACJ5H,EAAI6H,SAGJ,IAAIC,EAAOvK,KAAK4E,KAAKzD,KACrBsB,EAAI2H,UAAYhD,EAAQtE,UAAUgD,gBAClCrD,EAAI+H,KAAUpD,EAAQtE,UAAUmD,eAAhC,WACIjG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAElCtE,EAAI2H,UAAYhD,EAAQtE,UAAUiD,qBAClCtD,EAAI+H,KAAUpD,EAAQtE,UAAUoD,qBAAhC,YAEAlG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAElCvE,EAAI2H,UAAYhD,EAAQtE,UAAUkD,sBAClCvD,EAAI+H,KAAUpD,EAAQtE,UAAUoD,qBAAhC,YAEJzD,EAAIgI,UAAY,SAChBhI,EAAIiI,aAAe,SACnBjI,EAAIkI,SAASJ,EAAMvK,KAAK4E,KAAKrB,EAAGvD,KAAK4E,KAAKhD,GAC1Ca,EAAImI,aAER7B,OAAQ,SAASZ,GACbnI,KAAK4E,KAAKrB,EAAI4E,EAAMO,QAAUrG,EAAeS,UAAUW,WACvDzD,KAAK4E,KAAKhD,EAAIuG,EAAMQ,QAAUtG,EAAeS,UAAUY,WACnD1D,KAAK4E,KAAKrB,EAAI6D,EAAQtE,UAAU6C,aAAe,IAC/C3F,KAAK4E,KAAKrB,EAAI6D,EAAQtE,UAAU6C,cAEhC3F,KAAK4E,KAAKhD,EAAIwF,EAAQtE,UAAU6C,aAAe,IAC/C3F,KAAK4E,KAAKhD,EAAIwF,EAAQtE,UAAU6C,eAGxC1C,OAAQ,WACJ,IAAI4H,EAAkC,KAA5B7K,KAAK4E,KAAKrB,EAAIvD,KAAKkF,OACzB4F,EAAkC,KAA5B9K,KAAK4E,KAAKhD,EAAI5B,KAAKmF,OAC7BnF,KAAKkF,MAAQlF,KAAK4E,KAAKrB,EACvBvD,KAAKmF,MAAQnF,KAAK4E,KAAKhD,EAClB5B,KAAK4E,KAAK6D,WACXzI,KAAK4E,KAAKrB,GAAKsH,EACf7K,KAAK4E,KAAKhD,GAAKkJ,GAEf9K,KAAK4E,KAAKrB,EAAI6D,EAAQtE,UAAU6C,aAAe,IAC/C3F,KAAK4E,KAAKrB,EAAI6D,EAAQtE,UAAU6C,aAChC3F,KAAKkF,MAAQlF,KAAK4E,KAAKrB,EAAS,GAALsH,GAE3B7K,KAAK4E,KAAKhD,EAAIwF,EAAQtE,UAAU6C,aAAe,IAC/C3F,KAAK4E,KAAKhD,EAAIwF,EAAQtE,UAAU6C,aAChC3F,KAAKmF,MAAQnF,KAAK4E,KAAKhD,EAAS,GAALkJ,GAE/B9B,EAAKlG,UAAUuG,oBAAoBrJ,OAEvC+K,YAAa,SAASC,GAClBC,EAAenI,UAAUoI,YAAYF,IAEzCnC,QAAS,WACLzB,EAAQtE,UAAUkE,gBAAkBhH,KAAK4E,KAAKvE,KCnFtD6I,EAAYpG,WACRsF,SAAU,SAASD,GACf,IAAI5E,EAAI4E,EAAMO,SAAW1I,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAKuG,MAAQ,GACrDvJ,EAAIuG,EAAMQ,SAAW3I,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAKwG,OAAS,GAC1D,GAAI7H,EAAI,GAAKA,EAAIvD,KAAK4E,KAAKuG,OAASvJ,EAAI,GAAKA,EAAI5B,KAAK4E,KAAKwG,OACvD,OAAO,GAGflI,KAAM,SAAST,GACXA,EAAIyH,YACJzH,EAAI0D,UAAY,GAChB1D,EAAI4I,KACArL,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAKuG,MAAQ,EAChCnL,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAKwG,OAAS,EACjCpL,KAAK4E,KAAKuG,MACVnL,KAAK4E,KAAKwG,QAEd3I,EAAI2H,UAAYpK,KAAK4E,KAAK0G,GAE1B7I,EAAI4H,OACJ5H,EAAI6H,UAERvB,OAAQ,SAASZ,GACbnI,KAAK4E,KAAKrB,EAAI4E,EAAMO,QACpB1I,KAAK4E,KAAKhD,EAAIuG,EAAMQ,QAChB3I,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAKuG,MAAQ,EAAI,IACpCnL,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAKuG,MAAQ,GAEhCnL,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAKwG,OAAS,EAAI,IACrCpL,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAKwG,OAAS,IAGzCvC,QAAS,WACLxB,EAAavE,UAAU8E,QAAQ,WAAY,QAE/C3E,OAAQ,WACJ,IAAI4H,EAAkC,KAA5B7K,KAAK4E,KAAKrB,EAAIvD,KAAKkF,OACzB4F,EAAkC,KAA5B9K,KAAK4E,KAAKhD,EAAI5B,KAAKmF,OAC7BnF,KAAKkF,MAAQlF,KAAK4E,KAAKrB,EACvBvD,KAAKmF,MAAQnF,KAAK4E,KAAKhD,EAClB5B,KAAK4E,KAAK6D,WACXzI,KAAK4E,KAAKrB,GAAKsH,EACf7K,KAAK4E,KAAKhD,GAAKkJ,GAEf9K,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAK2G,OAAS,IACjCvL,KAAK4E,KAAKrB,EAAIvD,KAAK4E,KAAK2G,OACxBvL,KAAKkF,MAAQlF,KAAK4E,KAAKrB,EAAS,GAALsH,GAE3B7K,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAK2G,OAAS,IACjCvL,KAAK4E,KAAKhD,EAAI5B,KAAK4E,KAAK2G,OACxBvL,KAAKmF,MAAQnF,KAAK4E,KAAKhD,EAAS,GAALkJ,GAE/B9B,EAAKlG,UAAUuG,oBAAoBrJ,QCxD3CmJ,EAAYrG,WACRI,KAAM,SAAST,GACXA,EAAIyH,YACJzH,EAAI0D,UAAYiB,EAAQtE,UAAUqD,UAClC1D,EAAI+I,YAAcpE,EAAQtE,UAAUsD,UAChCpG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAElClC,QAAQC,IAAI9E,KAAK4E,KAAKvE,GAAK,QAC3BoC,EAAI0D,UAAYiB,EAAQtE,UAAUuD,gBAClC5D,EAAI+I,YAAcpE,EAAQtE,UAAUyD,gBAEpCvG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAElCvE,EAAI0D,UAAYiB,EAAQtE,UAAUuD,gBAClC5D,EAAI+I,YAAcpE,EAAQtE,UAAUwD,iBAExC7D,EAAIgJ,OAAOzL,KAAK4E,KAAKoF,SAASzG,EAAGvD,KAAK4E,KAAKoF,SAASpI,GACpDa,EAAIiJ,OACA1L,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKmF,WAAWoB,MAAQ,EACtDnL,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKmF,WAAWqB,OAAS,GAE3D3I,EAAI6H,SACJ7H,EAAImI,YAEJ,IAUIe,EAAQC,EAAIC,EAAIC,EAAIC,EAAItI,EAAYC,EAVpCsI,EAAKhM,KAAK4E,KAAKoF,SAASzG,EACxB0I,EAAKjM,KAAK4E,KAAKoF,SAASpI,EACxBsK,EAAKlM,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKmF,WAAWoB,MAAQ,EAC3DgB,EAAKnM,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKmF,WAAWqB,OAAS,EAC5D3B,EAAWC,IAAWyC,EAAKF,EAAIC,EAAKF,GACpCT,EAASnE,EAAQtE,UAAU6C,aAC3ByG,EAAUJ,EAAKT,GAAUW,EAAKF,GAAMvC,EACpC4C,EAAUJ,EAAKV,GAAUY,EAAKF,GAAMxC,EACpCxC,EAAQG,EAAQtE,UAAUmE,MAC1BC,EAAaE,EAAQtE,UAAUoE,WAE/BgF,GAAMF,GACNL,EAAS3G,KAAKsH,MAAMH,EAAKF,GAAMxC,GAC/B/F,EAAa+F,EAAW,EAAIzE,KAAKuH,IAAIZ,GACrClI,EAAagG,EAAW,EAAIzE,KAAKwH,IAAIb,KAErCA,EAAS3G,KAAKmC,GAAKnC,KAAKsH,MAAMH,EAAKF,GAAMxC,GACzC/F,EAAa+F,EAAW,EAAIzE,KAAKuH,IAAIZ,GACrClI,EAAagG,EAAW,EAAIzE,KAAKwH,IAAIb,IAErCO,GAAMF,IAENJ,EAAK3E,EAAQjC,KAAKwH,IAAIb,EAASzE,EAAa,GAC5C4E,EAAK7E,EAAQjC,KAAKuH,IAAIZ,EAASzE,EAAa,GAC5C2E,EAAK5E,EAAQjC,KAAKwH,IAAIb,EAASzE,EAAa,GAC5C6E,EAAK9E,EAAQjC,KAAKuH,IAAIZ,EAASzE,EAAa,IAE5CgF,EAAKF,IACLJ,EAAK3E,EAAQjC,KAAKwH,IAAIxH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD4E,EAAK7E,EAAQjC,KAAKuH,IAAIvH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD2E,EAAK5E,EAAQjC,KAAKwH,IAAIxH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD6E,EAAK9E,EAAQjC,KAAKuH,IAAIvH,KAAKmC,GAAKwE,EAASzE,EAAa,IAE1DzE,EAAIyH,YACJzH,EAAI0D,UAAYiB,EAAQtE,UAAUqD,UAClC1D,EAAI+I,YAAcpE,EAAQtE,UAAUsD,UAUhC8F,GAAMF,IACNvJ,EAAIgJ,OAAOW,EAAUR,EAAIS,EAAUP,GACnCrJ,EAAIiJ,OAAOU,EAASC,GACpB5J,EAAIiJ,OAAOU,EAAUP,EAAIQ,EAAUN,GACnCtJ,EAAImI,aAEJsB,EAAKF,IACLvJ,EAAIgJ,OAAOW,EAAUR,EAAIS,EAAUP,GACnCrJ,EAAIiJ,OAAOU,EAASC,GACpB5J,EAAIiJ,OAAOU,EAAUP,EAAIQ,EAAUN,GACnCtJ,EAAImI,aAERnI,EAAI4H,OAGJ,IAAIoC,EAAYrF,EAAQtE,UAAU0D,eAC9BkG,EAAatF,EAAQtE,UAAU2D,gBAC/BkG,SAAaC,SACbC,EAAYnD,IAAW+C,EAAWC,GAAc,EAChDI,EAAiB9H,KAAKsH,KAAKI,EAAa,EAAIG,GAChDpK,EAAIsK,OACJtK,EAAIyH,YAEAgC,GAAMF,GAENW,EACIX,EAAKvI,EAAaoJ,EAAY7H,KAAKwH,IAAIb,EAASmB,GACpDF,EACIX,EAAKvI,EAAamJ,EAAY7H,KAAKuH,IAAIZ,EAASmB,GACpDrK,EAAImB,UAAU+I,EAAaC,GAC3BnK,EAAIkJ,OAAOA,KAEXgB,EACIX,EAAKvI,EAAaoJ,EAAY7H,KAAKwH,IAAIb,EAASmB,GACpDF,EACIX,EAAKvI,EAAamJ,EAAY7H,KAAKuH,IAAIZ,EAASmB,GACpDrK,EAAImB,UAAU+I,EAAaC,GAC3BnK,EAAIkJ,OAAOA,EAAS3G,KAAKmC,KAG7BnH,KAAK2M,YAAcA,EACnB3M,KAAK4M,YAAcA,EACnB5M,KAAKyM,UAAYA,EACjBzM,KAAK0M,WAAaA,EAElBjK,EAAI4I,KAAK,EAAG,EAAGoB,EAAWC,GAC1BjK,EAAI2H,UAAYhD,EAAQtE,UAAU4D,YAClCjE,EAAI4H,OAEJ5H,EAAI2H,UAAYhD,EAAQtE,UAAU8D,cAClCnE,EAAI+H,KAAUpD,EAAQtE,UAAU+D,kBAAhC,WACI7G,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAElCtE,EAAI2H,UAAYhD,EAAQtE,UAAUyD,eAClC9D,EAAI+H,KAAUpD,EAAQtE,UAAUgE,wBAAhC,YAEA9G,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAElCvE,EAAI2H,UAAYhD,EAAQtE,UAAUwD,gBAClC7D,EAAI+H,KAAUpD,EAAQtE,UAAUgE,wBAAhC,YAEJ,IAAIkG,EAAY5F,EAAQtE,UAAU6D,kBAClClE,EAAIgI,UAAY,SAChBhI,EAAIiI,aAAe,SACf1K,KAAK4E,KAAKqI,IAAIjK,QAAUgK,IACxBhN,KAAK4E,KAAKqI,IAAMjN,KAAK4E,KAAKqI,IAAIC,QAC1BlN,KAAK4E,KAAKqI,IAAIE,UAAUH,GACxB,QAGRvK,EAAIkI,SAAS3K,KAAK4E,KAAKqI,IAAKR,EAAY,EAAGC,EAAa,GAExDjK,EAAImI,YACJnI,EAAI2K,WAERhF,SAAU,SAASD,GACf,IAAI6D,EAAKhM,KAAK4E,KAAKoF,SAASzG,EACxB0I,EAAKjM,KAAK4E,KAAKoF,SAASpI,EACxBsK,EAAKlM,KAAK4E,KAAKmF,WAAWxG,EAC1B4I,EAAKnM,KAAK4E,KAAKmF,WAAWnI,EAC1ByL,EAAKlF,EAAMO,QAAWrG,EAAeS,UAAUW,WAC/C6J,EAAKnF,EAAMQ,QAAWtG,EAAeS,UAAUY,WAE/C6J,EAAO7D,IAAWyC,EAAKF,EAAIC,EAAKF,GAChCwB,EAAO9D,IAAW4D,EAAKrB,EAAIoB,EAAKrB,GAChCyB,EAAO/D,IAAWyC,EAAKmB,EAAIpB,EAAKmB,GAChCK,GAAiBH,EAAOC,EAAOC,GAAQ,EAEvCE,SAEJ,GAAI3B,GAAME,GAGN,GADAyB,EAAe3I,KAAKuE,IAAI8D,EAAKrB,GACzBA,GAAMqB,EACN,OAAO,OAER,GAAIpB,GAAME,GAGb,GADAwB,EAAe3I,KAAKuE,IAAI+D,EAAKrB,GACzBA,GAAMqB,EACN,OAAO,MAER,IAAItB,EAAKE,IAAOmB,GAAMnB,GAAMmB,GAAMrB,GACrC,OAAO,EACJ,GAAIA,EAAKE,IAAOmB,GAAMrB,GAAMqB,GAAMnB,GACrC,OAAO,EAEPyB,EACI,EACA3I,KAAKiF,KACDyD,GACCA,EAAgBH,IAChBG,EAAgBF,IAChBE,EAAgBD,IAErBF,EAER,GAAII,GA9Bc,GA+Bd,OAAO,GAGf9E,QAAS,SAASV,GACdf,EAAQtE,UAAUkE,gBAAkBhH,KAAK4E,KAAKvE,IAElD0I,OAAQ,SAASgB,EAAYC,GACzBhK,KAAK+J,WAAaA,EAClB/J,KAAKgK,SAAWA,GAEpB/G,OAAQ,WACJ,IAAIqG,EAAYtE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GACjEiG,EAAYxE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GACjE6H,EAAWC,IAAWJ,EAAWE,GACjCG,GAAQ3J,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GAAKkG,EACzDG,GAAQ5J,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GAAK6H,EACzDf,EAAU,EACVC,EAAU,EACVc,EAAW,MAEXd,GAAWc,EAAW,KAAOG,EAAO,IADpClB,GAAWe,EAAW,KAAOE,EAAO,IAEtB,GAAKjB,EAAU,KACzBA,EAAU,IAEVA,EAAU,GAAKA,GAAW,KAC1BA,GAAW,IAEXC,EAAU,GAAKA,EAAU,KACzBA,EAAU,IAEVA,EAAU,GAAKA,GAAW,KAC1BA,GAAW,KAGfc,EAAW,MACXf,GAAWe,EAAW,KAAOE,EAAO,GACpChB,GAAWc,EAAW,KAAOG,EAAO,IAEnC5J,KAAK4E,KAAKmF,WAAWtB,WACtBzI,KAAK4E,KAAKmF,WAAWxG,GAAKmF,EAC1B1I,KAAK4E,KAAKmF,WAAWnI,GAAK+G,GAEzB3I,KAAK4E,KAAKoF,SAASvB,WACpBzI,KAAK4E,KAAKoF,SAASzG,GAAKmF,EACxB1I,KAAK4E,KAAKoF,SAASpI,GAAK+G,KCvOpCS,EAAkBtG,WACdI,KAAM,SAAST,GACX,IAAImL,GAAQ5N,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GAAK,EACzDsK,GAAQ7N,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GAAK,EACzDkM,EAAYpE,IACZ1E,KAAKuE,IAAIvJ,KAAK4E,KAAKoF,SAASzG,EAAIvD,KAAK4E,KAAKmF,WAAWxG,GACrDyB,KAAKuE,IAAIvJ,KAAK4E,KAAKoF,SAASpI,EAAI5B,KAAK4E,KAAKmF,WAAWnI,IAErDmM,GAAQ/N,KAAK4E,KAAKoF,SAASzG,EAAIvD,KAAK4E,KAAKmF,WAAWxG,GAAKuK,EACzDE,GAAQhO,KAAK4E,KAAKoF,SAASpI,EAAI5B,KAAK4E,KAAKmF,WAAWnI,GAAKkM,EAEzDG,EAAmBL,EAAnBK,EAA4BJ,EAEhCpL,EAAIyH,YACJzH,EAAI0D,UAAYiB,EAAQtE,UAAUqD,UAClC1D,EAAI+I,YAAcpE,EAAQtE,UAAUsD,UAChCpG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAElClC,QAAQC,IAAI9E,KAAK4E,KAAKvE,GAAK,QAC3BoC,EAAI0D,UAAYiB,EAAQtE,UAAUuD,gBAClC5D,EAAI+I,YAAcpE,EAAQtE,UAAUyD,gBAEpCvG,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAElCvE,EAAI0D,UAAYiB,EAAQtE,UAAUuD,gBAClC5D,EAAI+I,YAAcpE,EAAQtE,UAAUwD,iBAExC7D,EAAIgJ,OAAOzL,KAAK4E,KAAKmF,WAAWxG,EAAGvD,KAAK4E,KAAKmF,WAAWnI,GACxD,IAAIsM,EAASnJ,SAASkJ,EAlBL,GAkBkCF,GAC/CI,EAASpJ,SAASkJ,EAnBL,GAmBkCD,GACnDvL,EAAI2L,iBACAD,EACAD,EACAlO,KAAK4E,KAAKoF,SAASzG,EACnBvD,KAAK4E,KAAKoF,SAASpI,GAEvBa,EAAI6H,SAGJ,IASIqB,EAAQC,EAAIC,EAAIC,EAAIC,EAAIsC,EATxBrC,EAAKhM,KAAK4E,KAAKoF,SAASzG,EACxB0I,EAAKjM,KAAK4E,KAAKoF,SAASpI,EACxBsK,EAAKiC,EACLhC,EAAK+B,EACLI,EAAKtO,KAAK4E,KAAKmF,WAAWxG,EAC1BgL,EAAKvO,KAAK4E,KAAKmF,WAAWnI,EAC1B2J,EAASnE,EAAQtE,UAAU6C,aAC3ByG,EAAUJ,EAAKT,GAAUW,EAAKF,GAAMtC,IAAWyC,EAAKF,EAAIC,EAAKF,GAC7DK,EAAUJ,EAAKV,GAAUY,EAAKF,GAAMvC,IAAWyC,EAAKF,EAAIC,EAAKF,GAE7D/E,EAAQG,EAAQtE,UAAUmE,MAC1BC,EAAaE,EAAQtE,UAAUoE,WAC/BsH,EACA,KAAQxO,KAAK4E,KAAKoF,SAASzG,EAAIvD,KAAK4E,KAAKmF,WAAWxG,GAAK,GAAM4K,EAC/DM,EACA,KAAQzO,KAAK4E,KAAKoF,SAASpI,EAAI5B,KAAK4E,KAAKmF,WAAWnI,GAAK,GAAMsM,EAG/DvC,EAFA2C,GAAMtC,EAEGhH,KAAKsH,MAAMmC,EAAexC,GAAMvC,IAAW+E,EAAexC,EAAIuC,EAAexC,IAE7EhH,KAAKmC,GAAKnC,KAAKsH,MAAMmC,EAAexC,GAAMvC,IAAW+E,EAAexC,EAAIuC,EAAexC,IAEhGsC,EAAKtC,IACLJ,EAAK3E,EAAQjC,KAAKwH,IAAIxH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD4E,EAAK7E,EAAQjC,KAAKuH,IAAIvH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD2E,EAAK5E,EAAQjC,KAAKwH,IAAIxH,KAAKmC,GAAKwE,EAASzE,EAAa,GACtD6E,EAAK9E,EAAQjC,KAAKuH,IAAIvH,KAAKmC,GAAKwE,EAASzE,EAAa,IAEtDoH,EAAKtC,IAELJ,EAAK3E,EAAQjC,KAAKwH,IAAIb,EAASzE,EAAa,GAC5C4E,EAAK7E,EAAQjC,KAAKuH,IAAIZ,EAASzE,EAAa,GAC5C2E,EAAK5E,EAAQjC,KAAKwH,IAAIb,EAASzE,EAAa,GAC5C6E,EAAK9E,EAAQjC,KAAKuH,IAAIZ,EAASzE,EAAa,IAEhDzE,EAAI0D,UAAYiB,EAAQtE,UAAUqD,UAClC1D,EAAI2H,UAAYhD,EAAQtE,UAAUsD,UASlC3D,EAAIsK,OACJtK,EAAIyH,YACAoE,GAAMtC,IACNvJ,EAAIgJ,OAAOW,EAAUR,EAAIS,EAAUP,GACnCrJ,EAAIiJ,OAAOU,EAASC,GACpB5J,EAAIiJ,OAAOU,EAAUP,EAAIQ,EAAUN,GACnCtJ,EAAImI,aAEJ0D,EAAKtC,IACLvJ,EAAIgJ,OAAOW,EAAUR,EAAIS,EAAUP,GACnCrJ,EAAIiJ,OAAOU,EAASC,GACpB5J,EAAIiJ,OAAOU,EAAUP,EAAIQ,EAAUN,GACnCtJ,EAAImI,aAERnI,EAAI4H,OAEJ5H,EAAI2K,UAKAiB,EAFAC,GAAMtC,EAEOhH,KAAKsH,MAAMiC,EAAKtC,GAAMvC,IAAW6E,EAAKtC,EAAIqC,EAAKtC,IAGxDhH,KAAKmC,GAAKnC,KAAKsH,MAAMiC,EAAKtC,GAAMvC,IAAW6E,EAAKtC,EAAIqC,EAAKtC,IAEjE,IAAIS,EAAYrF,EAAQtE,UAAU0D,eAC9BkG,EAAatF,EAAQtE,UAAU2D,gBAC/BoG,EAAYnD,IAAW+C,EAAWC,GAAc,EAChDC,SAAaC,SAKbE,EAAiB9H,KAAKsH,KAAKI,EAAa,EAAIG,GAChDpK,EAAIsK,OACJtK,EAAIyH,YACAoE,EAAKtC,GACLW,EACI6B,EAAe3B,EAAY7H,KAAKwH,IAAI6B,EAAavB,GACrDF,EACI6B,EAAe5B,EAAY7H,KAAKuH,IAAI8B,EAAavB,GACrDrK,EAAImB,UAAU+I,EAAaC,GAC3BnK,EAAIkJ,OAAO0C,KAEX1B,EACI6B,EAAe3B,EAAY7H,KAAKwH,IAAI6B,EAAavB,GACrDF,EACI6B,EAAe5B,EAAY7H,KAAKuH,IAAI8B,EAAavB,GACrDrK,EAAImB,UAAU+I,EAAaC,GAC3BnK,EAAIkJ,OAAO0C,EAAarJ,KAAKmC,KAEjC1E,EAAI4I,KAAK,EAAG,EAAGoB,EAAWC,GAC1BjK,EAAI2H,UAAYhD,EAAQtE,UAAU4D,YAClCjE,EAAI4H,OAEJ5H,EAAI2H,UAAYhD,EAAQtE,UAAU8D,cAClCnE,EAAI+H,KAAUpD,EAAQtE,UAAU+D,kBAAhC,WACI7G,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUiE,iBAElCtE,EAAI2H,UAAYhD,EAAQtE,UAAUyD,eAClC9D,EAAI+H,KAAUpD,EAAQtE,UAAUgE,wBAAhC,YAEA9G,KAAK4E,KAAKvE,IAAM+G,EAAQtE,UAAUkE,kBAElCvE,EAAI2H,UAAYhD,EAAQtE,UAAUwD,gBAClC7D,EAAI+H,KAAUpD,EAAQtE,UAAUgE,wBAAhC,YAEJ,IAAIkG,EAAY5F,EAAQtE,UAAU6D,kBAClClE,EAAIgI,UAAY,SAChBhI,EAAIiI,aAAe,SACf1K,KAAK4E,KAAKqI,IAAIjK,QAAUgK,IACxBhN,KAAK4E,KAAKqI,IAAMjN,KAAK4E,KAAKqI,IAAIC,QAC1BlN,KAAK4E,KAAKqI,IAAIE,UAAUH,GACxB,QAGRvK,EAAIkI,SAAS3K,KAAK4E,KAAKqI,IAAKR,EAAY,EAAGC,EAAa,GAExDjK,EAAImI,YACJnI,EAAI2K,WAERhF,SAAU,SAASD,GACf,IAAI6D,EAAKhM,KAAK4E,KAAKoF,SAASzG,EACxB0I,EAAKjM,KAAK4E,KAAKoF,SAASpI,EACxBsK,EAAKlM,KAAK4E,KAAKmF,WAAWxG,EAC1B4I,EAAKnM,KAAK4E,KAAKmF,WAAWnI,EAC1ByL,EAAKlF,EAAMO,QAAWrG,EAAeS,UAAUW,WAC/C6J,EAAKnF,EAAMQ,QAAUtG,EAAeS,UAAUY,WAC9C6J,EAAO7D,IAAWyC,EAAKF,EAAIC,EAAKF,GAChCwB,EAAO9D,IAAW4D,EAAKrB,EAAIoB,EAAKrB,GAChCyB,EAAO/D,IAAWyC,EAAKmB,EAAIpB,EAAKmB,GAChCK,GAAiBH,EAAOC,EAAOC,GAAQ,EAGvCQ,GAFQ/B,EAAKF,GAAM,EAEnBiC,GADQ9B,EAAKF,GAAM,EAGnB6B,EAAYpE,IAAW1E,KAAKuE,IAAIyC,EAAKE,GAAKlH,KAAKuE,IAAI0C,EAAKE,IAExD6B,GAAQ/B,EAAKE,GAAM2B,EACnBI,EAASnJ,SAASkJ,EAJL,KAELjC,EAAKE,GAAM4B,IAGnBK,EAASpJ,SAASkJ,EALL,GAKkCD,GAE/CL,SAEAe,SACAF,SAAcC,SAElB,GAAIzC,GAAME,GAcN,GAXAyB,EAAe3I,KAAKuE,IAAI8D,EAAKrB,GAC7B0C,EAAa1J,KAAKuE,IAAI+D,EAAKnB,GAAMnH,KAAKuE,IAAI4C,EAAKF,GAC/CuC,EACIxJ,KAAK2J,IAAI,EAAID,EAAY,GAAKxC,EAC9B,EAAIwC,GAAc,EAAIA,GAAcP,EACpCnJ,KAAK2J,IAAID,EAAY,GAAK1C,EAC9ByC,EACIzJ,KAAK2J,IAAI,EAAID,EAAY,GAAKvC,EAC9B,EAAIuC,GAAc,EAAIA,GAAcR,EACpClJ,KAAK2J,IAAID,EAAY,GAAKzC,EACbjH,KAAKuE,IAAI8D,EAAKmB,IAnBjB,GAqBV,OAAO,OAER,GAAIvC,GAAME,GAab,GAXAwB,EAAe3I,KAAKuE,IAAI+D,EAAKrB,GAC7ByC,EAAa1J,KAAKuE,IAAI8D,EAAKnB,GAAMlH,KAAKuE,IAAI2C,EAAKF,GAC/CwC,EACIxJ,KAAK2J,IAAI,EAAID,EAAY,GAAKxC,EAC9B,EAAIwC,GAAc,EAAIA,GAAcP,EACpCnJ,KAAK2J,IAAID,EAAY,GAAK1C,EAC9ByC,EACIzJ,KAAK2J,IAAI,EAAID,EAAY,GAAKvC,EAC9B,EAAIuC,GAAc,EAAIA,GAAcR,EACpClJ,KAAK2J,IAAID,EAAY,GAAKzC,EACbjH,KAAKuE,IAAI+D,EAAKmB,IAnCjB,GAqCV,OAAO,OAER,GACFpB,EAAKnB,GAAMmB,EAAKrB,GAChBqB,EAAKrB,GAAMqB,EAAKnB,GAChBoB,EAAKnB,GAAMmB,EAAKrB,GAChBqB,EAAKrB,GAAMqB,EAAKnB,EAuBjB,OApBAwB,EACI,EACA3I,KAAKiF,KACDyD,GACCA,EAAgBH,IAChBG,EAAgBF,IAChBE,EAAgBD,IAErBF,EACJmB,EACI1J,KAAKiF,KAAKjF,KAAK2J,IAAIlB,EAAM,GAAKzI,KAAK2J,IAAIhB,EAAc,IAAMJ,EAC/DiB,EACIxJ,KAAK2J,IAAI,EAAID,EAAY,GAAKxC,EAC9B,EAAIwC,GAAc,EAAIA,GAAcP,EACpCnJ,KAAK2J,IAAID,EAAY,GAAK1C,EAC9ByC,EACIzJ,KAAK2J,IAAI,EAAID,EAAY,GAAKvC,EAC9B,EAAIuC,GAAc,EAAIA,GAAcR,EACpClJ,KAAK2J,IAAID,EAAY,GAAKzC,EACbvC,IAAW2D,EAAKmB,EAAclB,EAAKmB,IAjEtC,IAyEtB5F,QAAS,SAASV,GACdf,EAAQtE,UAAUkE,gBAAkBhH,KAAK4E,KAAKvE,IAElD0I,OAAQ,SAASgB,EAAYC,GACzBhK,KAAK+J,WAAaA,EAClB/J,KAAKgK,SAAWA,GAEpB/G,OAAQ,WACJ,IAAIqG,EAAYtE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GACjEiG,EAAYxE,KAAKuE,IAAIvJ,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GACjE6H,EAAWC,IAAWJ,EAAWE,GACjCG,GAAQ3J,KAAK4E,KAAKmF,WAAWxG,EAAIvD,KAAK4E,KAAKoF,SAASzG,GAAKkG,EACzDG,GAAQ5J,KAAK4E,KAAKmF,WAAWnI,EAAI5B,KAAK4E,KAAKoF,SAASpI,GAAK6H,EACzDf,EAAU,EACVC,EAAU,EACVc,EAAW,MAEXd,GAAWc,EAAW,KAAOG,EAAO,IADpClB,GAAWe,EAAW,KAAOE,EAAO,IAEtB,GAAKjB,EAAU,KACzBA,EAAU,IAEVA,EAAU,GAAKA,GAAW,KAC1BA,GAAW,IAEXC,EAAU,GAAKA,EAAU,KACzBA,EAAU,IAEVA,EAAU,GAAKA,GAAW,KAC1BA,GAAW,KAGfc,EAAW,MACXf,GAAWe,EAAW,KAAOE,EAAO,GACpChB,GAAWc,EAAW,KAAOG,EAAO,IAEnC5J,KAAK4E,KAAKmF,WAAWtB,WACtBzI,KAAK4E,KAAKmF,WAAWxG,GAAKmF,EAC1B1I,KAAK4E,KAAKmF,WAAWnI,GAAK+G,GAEzB3I,KAAK4E,KAAKoF,SAASvB,WACpBzI,KAAK4E,KAAKoF,SAASzG,GAAKmF,EACxB1I,KAAK4E,KAAKoF,SAASpI,GAAK+G,eC1S7B,SAASsC,KAChBA,EAAenI,WACX8L,OACIC,OAAQ,SAASjK,GACb,OAAO,IAAIqE,EAAcrE,IAE7ByG,KAAM,SAASzG,GACX,OAAO,IAAIsE,EAAYtE,IAE3BkK,KAAM,SAASlK,GACX,OAAO,IAAIuE,EAAYvE,IAE3BmK,WAAY,SAASnK,GACjB,OAAO,IAAIwE,EAAkBxE,KAGrCoK,WAAY,SAASpK,GACjBxC,EAAaU,UAAUwB,YACnB2G,EAAenI,UAAU8L,MAAMhK,EAAKF,MAAME,KAGlDqK,SAAU,SAASjE,GAEf,IADA,IAAIhH,KACKnB,EAAI,EAAGA,EAAImI,EAAMhI,OAAQH,IAC9BmB,EAAMQ,KAAKyG,EAAenI,UAAU8L,MAAM5D,EAAMnI,GAAG6B,MAAMsG,EAAMnI,KAEnET,EAAaU,UAAUiB,UAAUC,GACjCa,QAAQC,IAAI1C,EAAaU,UAAUC,WAEvCmI,YAAa,SAASF,GAClB,IAAK,IAAInI,EAAI,EAAGA,EAAImI,EAAMhI,OAAQH,IAC9BoI,EAAenI,UAAUkM,WAAWhE,EAAMnI,+BCtChDqM,GACNA,eAA6B,SAASC,GAElC,IADA,IAAIC,KACKvM,EAAI,EAAGA,EAAIsM,EAAMnM,OAAQH,IAAK,CACnC,IAAIwM,GACJA,KAAS,UACTA,EAAE9L,EAAIyB,KAAKsK,KAAK,GAAqB,IAAhBtK,KAAKC,UAC1BoK,EAAEzN,EAAIoD,KAAKsK,KAAK,GAAqB,IAAhBtK,KAAKC,UAC1BoK,EAAE9D,OAAS,GACX8D,EAAElE,MAAQ,EACVkE,EAAEjE,OAAS,EACXmE,IAAcF,EAAGF,EAAMtM,IACvBuM,EAAQ5K,KAAK6K,GAEjB,OAAOD,GAEXF,aAA2B,SAASC,GAEhC,IADA,IAAIK,KACK3M,EAAI,EAAGA,EAAIsM,EAAMnM,OAAQH,IAAK,CACnC,IAAIwI,GACJA,KAAY,QACZA,EAAK9H,EAAI,GAAqB,IAAhByB,KAAKC,SACnBoG,EAAKzJ,EAAI,GAAqB,IAAhBoD,KAAKC,SACnBoG,EAAKE,OAAS,GACdF,EAAKF,MAAQ,GACbE,EAAKD,OAAS,GACdmE,IAAclE,EAAM8D,EAAMtM,IAC1B2M,EAAMhL,KAAK6G,GAEf,OAAOmE,GAEXN,aAA2B,SAACC,EAAOM,GAE/B,IADA,IAAIzL,KACKnB,EAAI,EAAGA,EAAI4M,EAAUzM,OAAQH,IAAK,CACvC,IAAIiM,KACJA,EAAKpK,KAAOwK,EAAYQ,YAAYD,EAAU5M,GAAI4M,GAClDX,EAAK/E,WACDoF,EAAMD,EAAYS,eAAeR,EAAOM,EAAU5M,GAAG+M,YACzDd,EAAK9E,SACDmF,EAAMD,EAAYS,eAAeR,EAAOM,EAAU5M,GAAGgN,UACrDN,IAAcT,EAAMW,EAAU5M,IAC9BmB,EAAMQ,KAAKsK,GAEnB,OAAO9K,GAEXkL,eAA6B,SAASC,EAAO9O,GACzC,IAAK,IAAIwC,EAAI,EAAGA,EAAIsM,EAAMnM,OAAQH,IAC9B,GAAIsM,EAAMtM,GAAGxC,KAAOA,EAChB,OAAOwC,GAInBqM,YAA0B,SAASjC,EAAKwC,GACpC,IAAK,IAAI5M,EAAI,EAAGA,EAAI4M,EAAUzM,OAAQH,IAClC,GACI4M,EAAU5M,GAAGgN,SAAW5C,EAAI2C,WAC5BH,EAAU5M,GAAG+M,WAAa3C,EAAI4C,QAE9B,MAAO,aAGf,MAAO,QAEXX,KAAmB,WACf7G,MAAM,WAEVyH,EAAA,ECpDAC,QAEA,+CAKA,OAEA,UAEA,OAEA,UAEA,OAEA,UAEA,OAEA,UAEA,OAEA,UAEA,OAGA,0BAGA,aACA,UACA,MAEA,gBAEA,aACA,UACA,MAEA,gBAEA,aACA,UACA,MAEA,gBAEA,cACA,UACA,MAEA,gBAEA,cACA,UACA,MAEA,gBAEA,cACA,UACA,MAEA,gBAEA,cACA,UACA,MAEA,gBAEA,cACA,UACA,MAGA,6BAGA,UACA,cACA,YAGA,gCAGA,0CAGA,IAAAC,qBACAb,wDACAc,6BACAA,iBACAC,+DAGAA,wBAEAlM,yCAGAH,0DAKA,OAGA,WAGA,aACA,UACA,MAGA,oCAGA,IAAAtB,EAAAvC,yCACA,gEACA,2DACAwC,qHAGAgB,YAEA2M,iBACA,mBAAAhI,oCACAA,KAEA,qBACAgI,iBACA,qBAAAhI,sCACAA,KAEA,qBACAgI,iBACA,qBAAAhI,sCACAA,KAEA,mDAGApF,kCACAyM,2DAIAU,oBACAE,eCvKAC,GADiBvQ,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBoQ,YAAA,qBAA+BpQ,EAAA,SAAcE,OAAOsE,KAAA,SAAA6L,MAAA,eAAsCC,IAAKC,MAA/KzQ,KAA+K6D,eAA/K7D,KAAwMQ,GAAA,KAAAN,EAAA,SAA0BE,OAAOsE,KAAA,SAAA6L,MAAA,WAAkCC,IAAKC,MAAhRzQ,KAAgR0Q,WAAhR1Q,KAAqSQ,GAAA,KAAAN,EAAA,UAA2ByQ,IAAA,SAAAL,YAAA,SAAAlQ,OAAyC+K,MAAA,MAAAC,OAAA,YAElX3K,oBCCjB,IAcAmQ,EAdAjQ,EAAA,OAcAC,CACAmP,EACAM,GATA,EAVA,SAAAxP,GACAF,EAAA,SAaA,kBAEA,MAUAkQ,EAAA,QAAAD,EAAA","file":"static/js/app.b6786a2e4fe84ecd470e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-link',{key:\"demo1\",attrs:{\"to\":\"/\"}},[_vm._v(\" demo1 \")]),_vm._v(\" \"),_c('router-link',{key:\"demo2\",attrs:{\"to\":\"/demo2\"}},[_vm._v(\" demo2 \")]),_vm._v(\" \"),_c('keep-alive',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e31af25\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e31af25\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e31af25\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-link to=\"/\" key=\"demo1\"> demo1 </router-link>\r\n    <router-link to=\"/demo2\" key=\"demo2\"> demo2 </router-link>\r\n    <keep-alive>\r\n    <router-view/>\r\n    </keep-alive>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"App\"\r\n};\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport CanvasDemo from '@/components/CanvasDemo'\r\n\r\nVue.use(Router)\r\n\r\nexport const constantRouterMap = [\r\n    {\r\n        path: '/',\r\n        name: 'CanvasDemo',\r\n        component: () =>\r\n            import (\"@/components/CanvasDemo\")\r\n    },\r\n    {\r\n        path: '/demo2',\r\n        name: 'demo2',\r\n        component: () =>\r\n            import (\"@/components/demo2\")\r\n    }]\r\n\r\nexport default new Router({\r\n    // mode: 'history', // require service support\r\n    scrollBehavior: () => ({ y: 0 }),\r\n    routes: constantRouterMap\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export function ElementStore() {}\r\nElementStore.prototype = {\r\n    elements: [],\r\n    saveLines: function(lines) {\r\n        ElementStore.prototype.elements.splice(0, 0, ...lines);\r\n    },\r\n    saveElement: ele => {\r\n        ElementStore.prototype.elements.push(ele);\r\n    },\r\n    getElements: type => {\r\n        let eles = [];\r\n        for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n            if (ElementStore.prototype.elements[l].data.type == type) {\r\n                eles.push(ElementStore.prototype.elements[l]);\r\n            }\r\n        }\r\n        console.log(eles);\r\n        return eles;\r\n    },\r\n    resetData: () => {\r\n        console.log(\"resetData\");\r\n        for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n            if (ElementStore.prototype.elements[l].data.type == \"circle\") {\r\n                console.log(ElementStore.prototype.elements[l]);\r\n                ElementStore.prototype.elements[l].data.x = parseInt(\r\n                    50 + Math.random() * 700\r\n                );\r\n                ElementStore.prototype.elements[l].data.y = parseInt(\r\n                    50 + Math.random() * 700\r\n                );\r\n                ElementStore.prototype.elements[l].old_x =\r\n                    ElementStore.prototype.elements[l].data.x;\r\n                ElementStore.prototype.elements[l].old_y =\r\n                    ElementStore.prototype.elements[l].data.y;\r\n            }\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/ElementStore.js","import { ElementStore } from \"./ElementStore\";\r\n\r\nexport function RoleController(ctx) {\r\n    this.canvas = ctx;\r\n    this.pen = ctx.getContext(\"2d\");\r\n    this.main_loop = () => {\r\n        this.pen.clearRect(0, 0, 9999, 9999);\r\n        for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n            ElementStore.prototype.elements[l].living();\r\n            ElementStore.prototype.elements[l].draw(this.pen);\r\n        }\r\n        requestAnimationFrame(this.main_loop);\r\n    };\r\n    this.main_loop();\r\n    this.currentX = 0;\r\n    this.currentY = 0;\r\n    this.onDrag = (x, y, eventType) => {\r\n        if (eventType == \"down\") {\r\n            this.currentX = 0;\r\n            this.currentY = 0;\r\n        } else {\r\n            let translateX = x - this.currentX;\r\n            let translateY = y - this.currentY;\r\n            let shouldTransPen = false;\r\n            if (RoleController.prototype.translateX + translateX < 0) {\r\n                RoleController.prototype.translateX += translateX;\r\n                this.currentX = x;\r\n                shouldTransPen = true;\r\n            } else {\r\n                translateX = 0;\r\n            }\r\n            if (RoleController.prototype.translateY + translateY < 0) {\r\n                RoleController.prototype.translateY += translateY;\r\n                this.currentY = y;\r\n                shouldTransPen = true;\r\n            } else {\r\n                translateY = 0;\r\n            }\r\n            if (shouldTransPen) {\r\n                this.pen.translate(translateX, translateY);\r\n            }\r\n        }\r\n    };\r\n    this.backToStart = () => {\r\n        this.pen.translate(-RoleController.prototype.translateX, -RoleController.prototype.translateY);\r\n        RoleController.prototype.translateX = 0;\r\n        RoleController.prototype.translateY = 0;\r\n        ElementStore.prototype.resetData();\r\n    };\r\n}\r\nRoleController.prototype = {\r\n    translateX: 0,\r\n    translateY: 0\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/RoleController.js","const Setting = {};\r\nSetting.prototype = {\r\n    defaultBorder: 0.1,\r\n    defaultBorderColor: \"#ccc\",\r\n    RectBgColor: \"#f0f\",\r\n    RectWidth: 50,\r\n    RectHeight: 30,\r\n    CircleBgColor: \"#5CACEE\",\r\n    CircleRadius: 24, //圆的半径\r\n    CircleHoverBgColor: \"#FFD39B\",\r\n    CircleSelectColor: \"#FF8C69\",\r\n    CircleTextColor: \"#333\", // 圆正常时的字体颜色\r\n    CircleTextHoverColor: \"#4876FF\", // 圆悬停时的字体颜色\r\n    CircleTextSelectColor: \"#8B008B\", // 圆选中时的字体颜色\r\n    CircleTextFont: \"12\", // 圆正常时的字体大小\r\n    CircleTextSelectFont: \"18\", // 圆选中时的字体大小\r\n    lineWidth: 2, //线的宽度\r\n    LineColor: \"#333\", //线的正常颜色\r\n    lineSelectWidth: 4, //线被选中时的宽度\r\n    lineSelectColor: \"#0fff00\", //线被选中时的颜色\r\n    lineHoverColor: \"#9AFF9A\", //鼠标经过线时的颜色\r\n    lineLabelWidth: 50, //线label矩形的宽度\r\n    lineLabelHeight: 10, //线label矩形的高度\r\n    lineLabelBg: \"#FFFFFF\", //线label的背景\r\n    lineTextMaxLength: 5, //线label文字最大长度length\r\n    lineLabelText: \"#333\", //线label字体颜色 正常时\r\n    lineLabelTextFont: \"14\", //线label字体大小 正常时\r\n    lineLabelTextSelectFont: \"18\", //线label字体大小 选中时\r\n    hoverElementId: 0, //当时鼠标经过的元素的id\r\n    SelectElementId: 0, //当前被选中元素的id\r\n    bevel: 20, // 箭头边长\r\n    bevelAngle: Math.PI / 4 //箭头两边夹角\r\n};\r\nexport default Setting;\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/setting.js","import { ElementStore } from \"./ElementStore\";\r\nimport { RoleController } from \"./RoleController\";\r\nimport Setting from \"./setting\";\r\nexport function EventHandler() {}\r\nEventHandler.prototype = {\r\n    activeEle: \"\", //当前点击被激活元素\r\n    startDragEvent: {\r\n        onDrag: false\r\n    }, //拖拽canvas的起始事件\r\n    startTime: \"\", //激活元素被点击的起始时间，用于后期判断是否是双击，单击事件能不能被触发\r\n    clientList: {}, //canvas系统的发布订阅\r\n    listen: function(key, fn) {\r\n        if (!EventHandler.prototype.clientList[key]) {\r\n            EventHandler.prototype.clientList[key] = [];\r\n        }\r\n        EventHandler.prototype.clientList[key].push(fn);\r\n    },\r\n    trigger: function() {\r\n        let key = Array.prototype.shift.call(arguments);\r\n        let fns = EventHandler.prototype.clientList[key];\r\n        if (!fns || fns.length === 0) {\r\n            return false;\r\n        }\r\n        for (let l = 0; l < fns.length; l++) {\r\n            fns[l].apply(this, arguments);\r\n        }\r\n    },\r\n    handleClick: function(event) {\r\n        for (let l = ElementStore.prototype.elements.length - 1; l >= 0; l--) {\r\n            if (ElementStore.prototype.elements[l].caculate(event)) {\r\n                alert(\"ok\");\r\n            }\r\n        }\r\n    },\r\n    handleMouseDown: function(event) {\r\n        for (let l = ElementStore.prototype.elements.length - 1; l >= 0; l--) {\r\n            if (ElementStore.prototype.elements[l].caculate(event)) {\r\n                EventHandler.prototype.startTime = new Date().getTime();\r\n                EventHandler.prototype.activeEle = ElementStore.prototype.elements[l];\r\n                EventHandler.prototype.activeEle.data.isActive = true;\r\n                return;\r\n            }\r\n        }\r\n        if (EventHandler.prototype.activeEle == \"\") {\r\n            //拖拽画布\r\n            EventHandler.prototype.trigger(\"drag\", 0, 0, \"down\");\r\n            EventHandler.prototype.startDragEvent.onDrag = true;\r\n            EventHandler.prototype.startDragEvent.offsetX = event.offsetX;\r\n            EventHandler.prototype.startDragEvent.offsetY = event.offsetY;\r\n        }\r\n    },\r\n    handleMouseUp: function() {\r\n        if (\r\n            EventHandler.prototype.activeEle != \"\" &&\r\n            new Date().getTime() - this.startTime < 300\r\n        ) {\r\n            EventHandler.prototype.activeEle.onClick();\r\n        }\r\n        if (EventHandler.prototype.activeEle != \"\") {\r\n            EventHandler.prototype.activeEle.data.isActive = false;\r\n        }\r\n        EventHandler.prototype.startDragEvent.onDrag = false;\r\n        this.activeEle = \"\";\r\n    },\r\n    handleMouseMove: function(event) {\r\n        if (this.activeEle != \"\") {\r\n            this.activeEle.update(event);\r\n        }\r\n\r\n        if (EventHandler.prototype.startDragEvent.onDrag) {\r\n            EventHandler.prototype.onDrag(event);\r\n        }\r\n        for (let l = ElementStore.prototype.elements.length - 1; l >= 0; l--) {\r\n            if (ElementStore.prototype.elements[l].caculate(event)) {\r\n                Setting.prototype.hoverElementId =\r\n                    ElementStore.prototype.elements[l].data.id;\r\n                return;\r\n            }\r\n            if (l == ElementStore.prototype.elements.length - 1) {\r\n                Setting.prototype.hoverElementId = 0;\r\n            }\r\n        }\r\n    },\r\n    onDrag: function(event) {\r\n        let x = event.offsetX - EventHandler.prototype.startDragEvent.offsetX; //横坐标相对于起始位置移动了多少\r\n        let y = event.offsetY - EventHandler.prototype.startDragEvent.offsetY; //纵坐标相对于起始位置移动了多少\r\n        EventHandler.prototype.trigger(\"drag\", x, y);\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/EventHandler.js","import { ElementStore } from \"./ElementStore\";\r\nexport function Util() {}\r\nUtil.prototype = {\r\n    changeTragetElement: function(ele) {\r\n        for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n            if (\r\n                ElementStore.prototype.elements[l].data.id != ele.data.id &&\r\n                ElementStore.prototype.elements[l].data.x\r\n            ) {\r\n                let distanceX = Math.abs(\r\n                    ele.data.x - ElementStore.prototype.elements[l].data.x\r\n                );\r\n                let distanceY = Math.abs(\r\n                    ele.data.y - ElementStore.prototype.elements[l].data.y\r\n                );\r\n                let distance = Math.hypot(distanceX, distanceY);\r\n                let SinT =\r\n                    (ele.data.x - ElementStore.prototype.elements[l].data.x) / distance;\r\n                let CosT =\r\n                    (ele.data.y - ElementStore.prototype.elements[l].data.y) / distance;\r\n                if (distance < 50) {\r\n                    ElementStore.prototype.elements[l].data.x =\r\n                        ElementStore.prototype.elements[l].data.x -\r\n                        (50 - distance) * SinT * 0.1;\r\n                    ElementStore.prototype.elements[l].data.y =\r\n                        ElementStore.prototype.elements[l].data.y -\r\n                        (50 - distance) * CosT * 0.1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    livingCycle: function() {\r\n        let activeEle = \"\";\r\n        for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n            if (ElementStore.prototype.elements[l].data.isActive) {\r\n                activeEle = ElementStore.prototype.elements[l];\r\n            }\r\n        }\r\n        if (activeEle != \"\") {\r\n            for (let l = 0; l < ElementStore.prototype.elements.length; l++) {\r\n                if (\r\n                    ElementStore.prototype.elements[l].data.linkNum ==\r\n                    activeEle.data.linkNum &&\r\n                    ElementStore.prototype.elements[l].data.id != activeEle.data.id\r\n                ) {\r\n                    ElementStore.prototype.elements[l].data;\r\n                }\r\n            }\r\n        }\r\n\r\n        let distanceX = Math.abs(this.data.beginPoint.x - this.data.endPoint.x);\r\n        let distanceY = Math.abs(this.data.beginPoint.y - this.data.endPoint.y);\r\n        let distance = Math.hypot(distanceX, distanceY);\r\n        let SinT = (this.data.beginPoint.x - this.data.endPoint.x) / distance;\r\n        let CosT = this.data.beginPoint.y - this.data.endPoint.y;\r\n        if (distance > 300) {\r\n            this.data.endPoint.x =\r\n                this.data.endPoint.x + (distance - 300) * SinT * 0.01;\r\n            this.data.endPoint.y =\r\n                this.data.endPoint.y + (distance - 300) * CosT * 0.01;\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/Util.js","import { ElementCreator } from \"./ElementCreator\";\r\nimport { RoleController } from \"./RoleController\";\r\nimport Setting from \"./setting\";\r\nimport { Util } from \"./Util\";\r\nexport function CircleElement(data) {\r\n    this.old_x = data.x;\r\n    this.old_y = data.y;\r\n    this.isActive = false;\r\n    this.data = data;\r\n}\r\nCircleElement.prototype = {\r\n    caculate: function(event) {\r\n        let x = event.offsetX - RoleController.prototype.translateX - this.data.x;\r\n        let y = event.offsetY - RoleController.prototype.translateY - this.data.y;\r\n        if (Math.sqrt(x * x + y * y) < Setting.prototype.CircleRadius) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    draw: function(pen) {\r\n        pen.beginPath(); //单起一个路径，不会被外部影响\r\n        pen.arc(\r\n            this.data.x,\r\n            this.data.y,\r\n            Setting.prototype.CircleRadius,\r\n            0,\r\n            Math.PI * 2,\r\n            false\r\n        ); //圆心x,y,半径，起始弧度，最终弧度，顺时针(逆时针)\r\n        pen.fillStyle = Setting.prototype.CircleBgColor;\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            pen.fillStyle = Setting.prototype.CircleHoverBgColor;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            pen.fillStyle = Setting.prototype.CircleSelectColor;\r\n        }\r\n        pen.fill();\r\n        pen.stroke();\r\n\r\n        // 文字\r\n        let text = this.data.name;\r\n        pen.fillStyle = Setting.prototype.CircleTextColor; // 字体颜色\r\n        pen.font = `${Setting.prototype.CircleTextFont}px Arial`; // 字体大小\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            // 悬停时字体的颜色\r\n            pen.fillStyle = Setting.prototype.CircleTextHoverColor;\r\n            pen.font = `${Setting.prototype.CircleTextSelectFont}px Arial`;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            // 点击时字体的颜色\r\n            pen.fillStyle = Setting.prototype.CircleTextSelectColor;\r\n            pen.font = `${Setting.prototype.CircleTextSelectFont}px Arial`;\r\n        }\r\n        pen.textAlign = \"center\";\r\n        pen.textBaseline = \"middle\";\r\n        pen.fillText(text, this.data.x, this.data.y);\r\n        pen.closePath();\r\n    },\r\n    update: function(event) {\r\n        this.data.x = event.offsetX - RoleController.prototype.translateX;\r\n        this.data.y = event.offsetY - RoleController.prototype.translateY;\r\n        if (this.data.x - Setting.prototype.CircleRadius < 0) {\r\n            this.data.x = Setting.prototype.CircleRadius;\r\n        }\r\n        if (this.data.y - Setting.prototype.CircleRadius < 0) {\r\n            this.data.y = Setting.prototype.CircleRadius;\r\n        }\r\n    },\r\n    living: function() {\r\n        let vx = (this.data.x - this.old_x) * 0.92,\r\n            vy = (this.data.y - this.old_y) * 0.92;\r\n        this.old_x = this.data.x;\r\n        this.old_y = this.data.y;\r\n        if (!this.data.isActive) {\r\n            this.data.x += vx;\r\n            this.data.y += vy;\r\n        }\r\n        if (this.data.x - Setting.prototype.CircleRadius < 0) {\r\n            this.data.x = Setting.prototype.CircleRadius;\r\n            this.old_x = this.data.x + vx * 0.2;\r\n        }\r\n        if (this.data.y - Setting.prototype.CircleRadius < 0) {\r\n            this.data.y = Setting.prototype.CircleRadius;\r\n            this.old_y = this.data.y + vy * 0.2;\r\n        }\r\n        Util.prototype.changeTragetElement(this);\r\n    },\r\n    addChildren: function(datas) {\r\n        ElementCreator.prototype.addElements(datas);\r\n    },\r\n    onClick: function() {\r\n        Setting.prototype.SelectElementId = this.data.id;\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/CircleElement.js","import { ElementCreator } from \"./ElementCreator\";\r\nimport { EventHandler } from \"./EventHandler\";\r\nimport { Util } from \"./Util\";\r\nexport function RectElement(data) {\r\n    this.old_x = data.x;\r\n    this.old_y = data.y;\r\n    this.isActive = false;\r\n    this.data = data;\r\n}\r\nRectElement.prototype = {\r\n    caculate: function(event) {\r\n        let x = event.offsetX - (this.data.x - this.data.width / 2);\r\n        let y = event.offsetY - (this.data.y - this.data.height / 2);\r\n        if (x > 0 && x < this.data.width && y > 0 && y < this.data.height) {\r\n            return true;\r\n        }\r\n    },\r\n    draw: function(pen) {\r\n        pen.beginPath(); //单起一个路径，不会被外部影响\r\n        pen.lineWidth = 0.1;\r\n        pen.rect(\r\n            this.data.x - this.data.width / 2,\r\n            this.data.y - this.data.height / 2,\r\n            this.data.width,\r\n            this.data.height\r\n        );\r\n        pen.fillStyle = this.data.bg;\r\n        //pen.strokeStyle = this.data.border;\r\n        pen.fill();\r\n        pen.stroke();\r\n    },\r\n    update: function(event) {\r\n        this.data.x = event.offsetX;\r\n        this.data.y = event.offsetY;\r\n        if (this.data.x - this.data.width / 2 < 0) {\r\n            this.data.x = this.data.width / 2;\r\n        }\r\n        if (this.data.y - this.data.height / 2 < 0) {\r\n            this.data.y = this.data.height / 2;\r\n        }\r\n    },\r\n    onClick: function() {\r\n        EventHandler.prototype.trigger(\"eleClick\", \"aaa\");\r\n    },\r\n    living: function() {\r\n        let vx = (this.data.x - this.old_x) * 0.92,\r\n            vy = (this.data.y - this.old_y) * 0.92;\r\n        this.old_x = this.data.x;\r\n        this.old_y = this.data.y;\r\n        if (!this.data.isActive) {\r\n            this.data.x += vx;\r\n            this.data.y += vy;\r\n        }\r\n        if (this.data.x - this.data.radius < 0) {\r\n            this.data.x = this.data.radius;\r\n            this.old_x = this.data.x + vx * 0.2;\r\n        }\r\n        if (this.data.y - this.data.radius < 0) {\r\n            this.data.y = this.data.radius;\r\n            this.old_y = this.data.y + vy * 0.2;\r\n        }\r\n        Util.prototype.changeTragetElement(this);\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/RectElement.js","import Setting from \"./setting\";\r\nimport { RoleController } from \"./RoleController\";\r\nexport function LineElement(data) {\r\n    this.data = data;\r\n}\r\nLineElement.prototype = {\r\n    draw: function(pen) {\r\n        pen.beginPath(); //单起一个路径，不会被外部影响\r\n        pen.lineWidth = Setting.prototype.lineWidth; //线条的宽度\r\n        pen.strokeStyle = Setting.prototype.LineColor; //默认线条的颜色\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            // 悬停时线条的颜色\r\n            console.log(this.data.id + \"----\");\r\n            pen.lineWidth = Setting.prototype.lineSelectWidth;\r\n            pen.strokeStyle = Setting.prototype.lineHoverColor;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            // 点击时线条的颜色\r\n            pen.lineWidth = Setting.prototype.lineSelectWidth;\r\n            pen.strokeStyle = Setting.prototype.lineSelectColor;\r\n        }\r\n        pen.moveTo(this.data.endPoint.x, this.data.endPoint.y);\r\n        pen.lineTo(\r\n            this.data.beginPoint.x + this.data.beginPoint.width / 2,\r\n            this.data.beginPoint.y + this.data.beginPoint.height / 2\r\n        );\r\n        pen.stroke();\r\n        pen.closePath();\r\n        // 箭头\r\n        let x1 = this.data.endPoint.x;\r\n        let y1 = this.data.endPoint.y;\r\n        let x2 = this.data.beginPoint.x + this.data.beginPoint.width / 2;\r\n        let y2 = this.data.beginPoint.y + this.data.beginPoint.height / 2;\r\n        let distance = Math.hypot(y2 - y1, x2 - x1); // 两点圆心间距\r\n        let radius = Setting.prototype.CircleRadius; // 圆形节点的半径\r\n        let vertexX = x1 + radius * (x2 - x1) / distance; // 箭头顶点，在圆上\r\n        let vertexY = y1 + radius * (y2 - y1) / distance;\r\n        let bevel = Setting.prototype.bevel; // 箭头长度\r\n        let bevelAngle = Setting.prototype.bevelAngle; // 箭头两边夹角\r\n        var rotate, xa, xb, ya, yb, translateX, translateY;\r\n        if (x2 >= x1) {\r\n            rotate = Math.asin((y2 - y1) / distance); // 旋转弧度\r\n            translateY = distance / 2 * Math.sin(rotate);\r\n            translateX = distance / 2 * Math.cos(rotate); // 圆心距离的中心点\r\n        } else {\r\n            rotate = Math.PI - Math.asin((y2 - y1) / distance); // 旋转弧度\r\n            translateY = distance / 2 * Math.sin(rotate);\r\n            translateX = distance / 2 * Math.cos(rotate);\r\n        }\r\n        if (x2 >= x1) {\r\n            // 箭头微调的距离\r\n            xa = bevel * Math.cos(rotate - bevelAngle / 2);\r\n            ya = bevel * Math.sin(rotate - bevelAngle / 2);\r\n            xb = bevel * Math.cos(rotate + bevelAngle / 2);\r\n            yb = bevel * Math.sin(rotate + bevelAngle / 2);\r\n        }\r\n        if (x2 < x1) {\r\n            xa = bevel * Math.cos(Math.PI - rotate + bevelAngle / 2);\r\n            ya = bevel * Math.sin(Math.PI - rotate + bevelAngle / 2);\r\n            xb = bevel * Math.cos(Math.PI - rotate - bevelAngle / 2);\r\n            yb = bevel * Math.sin(Math.PI - rotate - bevelAngle / 2);\r\n        }\r\n        pen.beginPath();\r\n        pen.lineWidth = Setting.prototype.lineWidth; // 箭头线条的宽度\r\n        pen.strokeStyle = Setting.prototype.LineColor; // 箭头线条的颜色\r\n        // if (this.data.id == Setting.prototype.hoverElementId) {\r\n        //     // 悬停时箭头的颜色\r\n        //     pen.fillStyle = Setting.prototype.lineHoverColor;\r\n        // }\r\n        // if (this.data.id == Setting.prototype.SelectElementId) {\r\n        //     // 点击时箭头的颜色\r\n        //     pen.fillStyle = Setting.prototype.lineSelectColor;\r\n        // }\r\n\r\n        if (x2 >= x1) {\r\n            pen.moveTo(vertexX + xa, vertexY + ya); // 箭头左顶点\r\n            pen.lineTo(vertexX, vertexY); // 圆上节点\r\n            pen.lineTo(vertexX + xb, vertexY + yb); // 箭头右顶点\r\n            pen.closePath();\r\n        }\r\n        if (x2 < x1) {\r\n            pen.moveTo(vertexX - xa, vertexY + ya);\r\n            pen.lineTo(vertexX, vertexY);\r\n            pen.lineTo(vertexX - xb, vertexY + yb);\r\n            pen.closePath();\r\n        }\r\n        pen.fill();\r\n\r\n        // 文字矩形\r\n        let rectWidth = Setting.prototype.lineLabelWidth;\r\n        let rectHeight = Setting.prototype.lineLabelHeight;\r\n        let rectOriginX, rectOriginY;\r\n        let rectbevel = Math.hypot(rectWidth, rectHeight) / 2; // 矩形内斜对角一半\r\n        let rectInnerAngle = Math.asin(rectHeight / 2 / rectbevel); // 矩形内斜对角线和矩形宽的夹角\r\n        pen.save();\r\n        pen.beginPath();\r\n\r\n        if (x2 >= x1) {\r\n            // x1 + translateX 文字矩形左顶点位于 两点圆心距离的中心点\r\n            rectOriginX =\r\n                x1 + translateX - rectbevel * Math.cos(rotate + rectInnerAngle);\r\n            rectOriginY =\r\n                y1 + translateY - rectbevel * Math.sin(rotate + rectInnerAngle);\r\n            pen.translate(rectOriginX, rectOriginY);\r\n            pen.rotate(rotate);\r\n        } else {\r\n            rectOriginX =\r\n                x1 + translateX + rectbevel * Math.cos(rotate + rectInnerAngle);\r\n            rectOriginY =\r\n                y1 + translateY + rectbevel * Math.sin(rotate + rectInnerAngle);\r\n            pen.translate(rectOriginX, rectOriginY);\r\n            pen.rotate(rotate - Math.PI);\r\n        }\r\n        // 点击文字 需要用到的参数\r\n        this.rectOriginX = rectOriginX;\r\n        this.rectOriginY = rectOriginY;\r\n        this.rectWidth = rectWidth;\r\n        this.rectHeight = rectHeight;\r\n\r\n        pen.rect(0, 0, rectWidth, rectHeight);\r\n        pen.fillStyle = Setting.prototype.lineLabelBg; // 矩形背景颜色\r\n        pen.fill();\r\n\r\n        pen.fillStyle = Setting.prototype.lineLabelText; // 字体颜色\r\n        pen.font = `${Setting.prototype.lineLabelTextFont}px Arial`;\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            // 悬停时字体的颜色\r\n            pen.fillStyle = Setting.prototype.lineHoverColor;\r\n            pen.font = `${Setting.prototype.lineLabelTextSelectFont}px Arial`;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            // 点击时字体的颜色\r\n            pen.fillStyle = Setting.prototype.lineSelectColor;\r\n            pen.font = `${Setting.prototype.lineLabelTextSelectFont}px Arial`;\r\n        }\r\n        let maxLength = Setting.prototype.lineTextMaxLength;\r\n        pen.textAlign = \"center\";\r\n        pen.textBaseline = \"middle\";\r\n        if (this.data.rel.length >= maxLength) {\r\n            this.data.rel = this.data.rel.replace(\r\n                this.data.rel.substring(maxLength),\r\n                \"...\"\r\n            );\r\n        }\r\n        pen.fillText(this.data.rel, rectWidth / 2, rectHeight / 2);\r\n\r\n        pen.closePath();\r\n        pen.restore();\r\n    },\r\n    caculate: function(event) {\r\n        let x1 = this.data.endPoint.x;\r\n        let y1 = this.data.endPoint.y;\r\n        let x2 = this.data.beginPoint.x;\r\n        let y2 = this.data.beginPoint.y;\r\n        let x0 = event.offsetX  - RoleController.prototype.translateX; // 点击页面的坐标\r\n        let y0 = event.offsetY  - RoleController.prototype.translateY;\r\n\r\n        let x1x2 = Math.hypot(y2 - y1, x2 - x1); // 线的长度\r\n        let x0x1 = Math.hypot(y0 - y1, x0 - x1); // 3条边距离\r\n        let x0x2 = Math.hypot(y2 - y0, x2 - x0); // 3条边距离\r\n        let perimeterHalf = (x1x2 + x0x1 + x0x2) / 2; // 三角形周长一半\r\n        let mixDistance = 10; // 设置最小距离\r\n        let lineDistance; // 点击点到线的距离\r\n\r\n        if (x1 == x2) {\r\n            // 竖线\r\n            lineDistance = Math.abs(x0 - x1);\r\n            if (x1 == x0) {\r\n                return false;\r\n            }\r\n        } else if (y1 == y2) {\r\n            // 横线\r\n            lineDistance = Math.abs(y0 - y1);\r\n            if (y1 == y0) {\r\n                return false;\r\n            }\r\n        } else if (x1 > x2 && (x0 <= x2 || x0 >= x1)) {\r\n            return false;\r\n        } else if (x1 < x2 && (x0 <= x1 || x0 >= x2)) {\r\n            return false;\r\n        } else {\r\n            lineDistance =\r\n                2 *\r\n                Math.sqrt(\r\n                    perimeterHalf *\r\n                    (perimeterHalf - x1x2) *\r\n                    (perimeterHalf - x0x1) *\r\n                    (perimeterHalf - x0x2)\r\n                ) /\r\n                x1x2;\r\n        }\r\n        if (lineDistance <= mixDistance) {\r\n            return true;\r\n        }\r\n    },\r\n    onClick: function(event) {\r\n        Setting.prototype.SelectElementId = this.data.id;\r\n    },\r\n    update: function(beginPoint, endPoint) {\r\n        this.beginPoint = beginPoint;\r\n        this.endPoint = endPoint;\r\n    },\r\n    living: function() {\r\n        let distanceX = Math.abs(this.data.beginPoint.x - this.data.endPoint.x);\r\n        let distanceY = Math.abs(this.data.beginPoint.y - this.data.endPoint.y);\r\n        let distance = Math.hypot(distanceX, distanceY);\r\n        let SinT = (this.data.beginPoint.x - this.data.endPoint.x) / distance;\r\n        let CosT = (this.data.beginPoint.y - this.data.endPoint.y) / distance;\r\n        let offsetX = 0;\r\n        let offsetY = 0;\r\n        if (distance > 250) {\r\n            offsetX = (distance - 250) * SinT * 0.2;\r\n            offsetY = (distance - 250) * CosT * 0.2;\r\n            if (offsetX > 0 && offsetX > 30) {\r\n                offsetX = 30;\r\n            }\r\n            if (offsetX < 0 && offsetX < -30) {\r\n                offsetX = -30;\r\n            }\r\n            if (offsetY > 0 && offsetY > 30) {\r\n                offsetY = 30;\r\n            }\r\n            if (offsetY < 0 && offsetY < -30) {\r\n                offsetY = -30;\r\n            }\r\n        }\r\n        if (distance < 150) {\r\n            offsetX = (distance - 150) * SinT * 0.2;\r\n            offsetY = (distance - 150) * CosT * 0.2;\r\n        }\r\n        if (!this.data.beginPoint.isActive) {\r\n            this.data.beginPoint.x -= offsetX;\r\n            this.data.beginPoint.y -= offsetY;\r\n        }\r\n        if (!this.data.endPoint.isActive) {\r\n            this.data.endPoint.x += offsetX;\r\n            this.data.endPoint.y += offsetY;\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/LineElement.js","import Setting from \"./setting\";\r\nimport { RoleController } from \"./RoleController\";\r\nexport function BezierLineElement(data) {\r\n    this.data = data;\r\n}\r\nBezierLineElement.prototype = {\r\n    draw: function(pen) {\r\n        let midX = (this.data.beginPoint.x + this.data.endPoint.x) / 2;\r\n        let midY = (this.data.beginPoint.y + this.data.endPoint.y) / 2;\r\n        let hypotSide = Math.hypot(\r\n            Math.abs(this.data.endPoint.x - this.data.beginPoint.x),\r\n            Math.abs(this.data.endPoint.y - this.data.beginPoint.y)\r\n        );\r\n        let sinT = (this.data.endPoint.x - this.data.beginPoint.x) / hypotSide;\r\n        let cosT = (this.data.endPoint.y - this.data.beginPoint.y) / hypotSide;\r\n        let lineHeight = 60;\r\n        let middlePoint = { x: midX, y: midY };\r\n        // 绘制线条\r\n        pen.beginPath(); //单起一个路径，不会被外部影响\r\n        pen.lineWidth = Setting.prototype.lineWidth; //线条的宽度\r\n        pen.strokeStyle = Setting.prototype.LineColor; //默认线条的颜色\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            // 悬停时线条的颜色\r\n            console.log(this.data.id + \"----\");\r\n            pen.lineWidth = Setting.prototype.lineSelectWidth;\r\n            pen.strokeStyle = Setting.prototype.lineHoverColor;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            // 点击时线条的颜色\r\n            pen.lineWidth = Setting.prototype.lineSelectWidth;\r\n            pen.strokeStyle = Setting.prototype.lineSelectColor;\r\n        }\r\n        pen.moveTo(this.data.beginPoint.x, this.data.beginPoint.y);\r\n        let finalY = parseInt(middlePoint.y + lineHeight * sinT); // 控制点\r\n        let finalX = parseInt(middlePoint.x - lineHeight * cosT);\r\n        pen.quadraticCurveTo(\r\n            finalX,\r\n            finalY,\r\n            this.data.endPoint.x,\r\n            this.data.endPoint.y\r\n        );\r\n        pen.stroke();\r\n\r\n        // 箭头\r\n        let x1 = this.data.endPoint.x;\r\n        let y1 = this.data.endPoint.y;\r\n        let x2 = finalX;\r\n        let y2 = finalY;\r\n        let x3 = this.data.beginPoint.x;\r\n        let y3 = this.data.beginPoint.y;\r\n        let radius = Setting.prototype.CircleRadius; // 圆形节点的半径\r\n        let vertexX = x1 + radius * (x2 - x1) / Math.hypot(y2 - y1, x2 - x1); // 箭头在圆上顶点(控制点和x1点)\r\n        let vertexY = y1 + radius * (y2 - y1) / Math.hypot(y2 - y1, x2 - x1);\r\n        var rotate, xa, xb, ya, yb, rotateText;\r\n        let bevel = Setting.prototype.bevel; // 箭头长度\r\n        let bevelAngle = Setting.prototype.bevelAngle; // 箭头两边夹角\r\n        let CurveVertexX =\r\n            0.25 * (this.data.endPoint.x + this.data.beginPoint.x) + 0.5 * finalX; // 曲线上顶点坐标\r\n        let CurveVertexY =\r\n            0.25 * (this.data.endPoint.y + this.data.beginPoint.y) + 0.5 * finalY;\r\n        if (x3 >= x1) {\r\n            // rotate：计算箭头两边点的角度\r\n            rotate = Math.asin((CurveVertexY - y1) / Math.hypot(CurveVertexY - y1, CurveVertexX - x1)); // 弧度\r\n        } else {\r\n            rotate = Math.PI - Math.asin((CurveVertexY - y1) / Math.hypot(CurveVertexY - y1, CurveVertexX - x1)); // 弧度\r\n        }\r\n        if (x3 < x1) {\r\n            xa = bevel * Math.cos(Math.PI - rotate + bevelAngle / 2);\r\n            ya = bevel * Math.sin(Math.PI - rotate + bevelAngle / 2);\r\n            xb = bevel * Math.cos(Math.PI - rotate - bevelAngle / 2);\r\n            yb = bevel * Math.sin(Math.PI - rotate - bevelAngle / 2);\r\n        }\r\n        if (x3 > x1) {\r\n            // xa ya,xb yb 箭头两个结束点位置相对于顶点的距离\r\n            xa = bevel * Math.cos(rotate - bevelAngle / 2);\r\n            ya = bevel * Math.sin(rotate - bevelAngle / 2);\r\n            xb = bevel * Math.cos(rotate + bevelAngle / 2);\r\n            yb = bevel * Math.sin(rotate + bevelAngle / 2);\r\n        }\r\n        pen.lineWidth = Setting.prototype.lineWidth; //箭头线条的宽度\r\n        pen.fillStyle = Setting.prototype.LineColor; //默认箭头线条的颜色\r\n        // if (this.data.id == Setting.prototype.hoverElementId) {\r\n        //     // 悬停时箭头的颜色\r\n        //     pen.fillStyle = Setting.prototype.lineHoverColor;\r\n        // }\r\n        // if (this.data.id == Setting.prototype.SelectElementId) {\r\n        //     // 点击时箭头的颜色\r\n        //     pen.fillStyle = Setting.prototype.lineSelectColor;\r\n        // }\r\n        pen.save();\r\n        pen.beginPath();\r\n        if (x3 >= x1) {\r\n            pen.moveTo(vertexX + xa, vertexY + ya); // 左箭头顶点\r\n            pen.lineTo(vertexX, vertexY); // 圆上节点\r\n            pen.lineTo(vertexX + xb, vertexY + yb); // 右箭头顶点\r\n            pen.closePath();\r\n        }\r\n        if (x3 < x1) {\r\n            pen.moveTo(vertexX - xa, vertexY + ya);\r\n            pen.lineTo(vertexX, vertexY); // 圆上节点\r\n            pen.lineTo(vertexX - xb, vertexY + yb);\r\n            pen.closePath();\r\n        }\r\n        pen.fill();     // 实心箭头\r\n        // pen.stroke();\r\n        pen.restore();\r\n\r\n        // 文字矩形\r\n        if (x3 >= x1) {\r\n            // rotateText 文字矩形旋转角度\r\n            rotateText = Math.asin((y3 - y1) / Math.hypot(y3 - y1, x3 - x1));\r\n        } else {\r\n            rotateText =\r\n                Math.PI - Math.asin((y3 - y1) / Math.hypot(y3 - y1, x3 - x1));\r\n        }\r\n        let rectWidth = Setting.prototype.lineLabelWidth;\r\n        let rectHeight = Setting.prototype.lineLabelHeight;\r\n        let rectbevel = Math.hypot(rectWidth, rectHeight) / 2; // 矩形内斜对角一半\r\n        let rectOriginX, rectOriginY; // 文字矩形左上角坐标\r\n        // let CurveVertexX =\r\n        //     0.25 * (this.data.endPoint.x + this.data.beginPoint.x) + 0.5 * finalX; // 曲线上顶点坐标\r\n        // let CurveVertexY =\r\n        //     0.25 * (this.data.endPoint.y + this.data.beginPoint.y) + 0.5 * finalY;\r\n        let rectInnerAngle = Math.asin(rectHeight / 2 / rectbevel); // 矩形内斜对角线和矩形宽的夹角\r\n        pen.save();\r\n        pen.beginPath();\r\n        if (x3 > x1) {\r\n            rectOriginX =\r\n                CurveVertexX - rectbevel * Math.cos(rotateText + rectInnerAngle);\r\n            rectOriginY =\r\n                CurveVertexY - rectbevel * Math.sin(rotateText + rectInnerAngle);\r\n            pen.translate(rectOriginX, rectOriginY);\r\n            pen.rotate(rotateText);\r\n        } else {\r\n            rectOriginX =\r\n                CurveVertexX + rectbevel * Math.cos(rotateText + rectInnerAngle);\r\n            rectOriginY =\r\n                CurveVertexY + rectbevel * Math.sin(rotateText + rectInnerAngle);\r\n            pen.translate(rectOriginX, rectOriginY);\r\n            pen.rotate(rotateText - Math.PI);\r\n        }\r\n        pen.rect(0, 0, rectWidth, rectHeight);\r\n        pen.fillStyle = Setting.prototype.lineLabelBg; // 矩形背景颜色\r\n        pen.fill();\r\n\r\n        pen.fillStyle = Setting.prototype.lineLabelText; // 字体颜色\r\n        pen.font = `${Setting.prototype.lineLabelTextFont}px Arial`;\r\n        if (this.data.id == Setting.prototype.hoverElementId) {\r\n            // 悬停时字体的颜色\r\n            pen.fillStyle = Setting.prototype.lineHoverColor;\r\n            pen.font = `${Setting.prototype.lineLabelTextSelectFont}px Arial`;\r\n        }\r\n        if (this.data.id == Setting.prototype.SelectElementId) {\r\n            // 点击时字体的颜色\r\n            pen.fillStyle = Setting.prototype.lineSelectColor;\r\n            pen.font = `${Setting.prototype.lineLabelTextSelectFont}px Arial`;\r\n        }\r\n        let maxLength = Setting.prototype.lineTextMaxLength;\r\n        pen.textAlign = \"center\";\r\n        pen.textBaseline = \"middle\";\r\n        if (this.data.rel.length >= maxLength) {\r\n            this.data.rel = this.data.rel.replace(\r\n                this.data.rel.substring(maxLength),\r\n                \"...\"\r\n            );\r\n        }\r\n        pen.fillText(this.data.rel, rectWidth / 2, rectHeight / 2);\r\n\r\n        pen.closePath();\r\n        pen.restore();\r\n    },\r\n    caculate: function(event) {\r\n        let x1 = this.data.endPoint.x;\r\n        let y1 = this.data.endPoint.y;\r\n        let x2 = this.data.beginPoint.x;\r\n        let y2 = this.data.beginPoint.y;\r\n        let x0 = event.offsetX  - RoleController.prototype.translateX; // 点击页面的坐标\r\n        let y0 = event.offsetY - RoleController.prototype.translateY;\r\n        let x1x2 = Math.hypot(y2 - y1, x2 - x1); // 线的长度 圆心两点间距\r\n        let x0x1 = Math.hypot(y0 - y1, x0 - x1); // 3条边距离\r\n        let x0x2 = Math.hypot(y2 - y0, x2 - x0); // 3条边距离\r\n        let perimeterHalf = (x1x2 + x0x1 + x0x2) / 2; // 三角形周长一半\r\n        let midX = (x2 + x1) / 2;\r\n        let midY = (y2 + y1) / 2;\r\n        let middlePoint = { x: midX, y: midY };\r\n        let lineHeight = 60;\r\n        let hypotSide = Math.hypot(Math.abs(x1 - x2), Math.abs(y1 - y2));\r\n        let sinT = (x1 - x2) / hypotSide;\r\n        let cosT = (y1 - y2) / hypotSide;\r\n        let finalY = parseInt(middlePoint.y + lineHeight * sinT); // 控制点\r\n        let finalX = parseInt(middlePoint.x - lineHeight * cosT);\r\n        let mixDistance = 10; // 设置最小距离\r\n        let lineDistance; // 点击到两点直线的距离\r\n        let bezierDistance; // 点击到贝塞尔曲线的距离\r\n        let parameterT; // 贝塞尔曲线参数T,与起始点相比\r\n        let CurveVertexX, CurveVertexY; // 贝塞尔曲线上的点\r\n\r\n        if (x1 == x2) {\r\n            // y1>y2 箭头向上\r\n            // 竖线\r\n            lineDistance = Math.abs(x0 - x1);\r\n            parameterT = Math.abs(y0 - y2) / Math.abs(y2 - y1);\r\n            CurveVertexX =\r\n                Math.pow(1 - parameterT, 2) * x2 +\r\n                2 * parameterT * (1 - parameterT) * finalX +\r\n                Math.pow(parameterT, 2) * x1;\r\n            CurveVertexY =\r\n                Math.pow(1 - parameterT, 2) * y2 +\r\n                2 * parameterT * (1 - parameterT) * finalY +\r\n                Math.pow(parameterT, 2) * y1;\r\n            bezierDistance = Math.abs(x0 - CurveVertexX);\r\n            if (bezierDistance <= mixDistance) {\r\n                return true;\r\n            }\r\n        } else if (y1 == y2) {\r\n            // 横线\r\n            lineDistance = Math.abs(y0 - y1);\r\n            parameterT = Math.abs(x0 - x2) / Math.abs(x2 - x1);\r\n            CurveVertexX =\r\n                Math.pow(1 - parameterT, 2) * x2 +\r\n                2 * parameterT * (1 - parameterT) * finalX +\r\n                Math.pow(parameterT, 2) * x1;\r\n            CurveVertexY =\r\n                Math.pow(1 - parameterT, 2) * y2 +\r\n                2 * parameterT * (1 - parameterT) * finalY +\r\n                Math.pow(parameterT, 2) * y1;\r\n            bezierDistance = Math.abs(y0 - CurveVertexY);\r\n            if (bezierDistance <= mixDistance) {\r\n                return true;\r\n            }\r\n        } else if (\r\n            (x0 < x2 && x0 > x1) ||\r\n            (x0 < x1 && x0 > x2) ||\r\n            (y0 < y2 && y0 > y1) ||\r\n            (y0 < y1 && y0 > y2)\r\n        ) {\r\n            // x0 y0点在两个圆点之间时计算bezierDistance\r\n            lineDistance =\r\n                2 *\r\n                Math.sqrt(\r\n                    perimeterHalf *\r\n                    (perimeterHalf - x1x2) *\r\n                    (perimeterHalf - x0x1) *\r\n                    (perimeterHalf - x0x2)\r\n                ) /\r\n                x1x2;\r\n            parameterT =\r\n                Math.sqrt(Math.pow(x0x2, 2) - Math.pow(lineDistance, 2)) / x1x2;\r\n            CurveVertexX =\r\n                Math.pow(1 - parameterT, 2) * x2 +\r\n                2 * parameterT * (1 - parameterT) * finalX +\r\n                Math.pow(parameterT, 2) * x1;\r\n            CurveVertexY =\r\n                Math.pow(1 - parameterT, 2) * y2 +\r\n                2 * parameterT * (1 - parameterT) * finalY +\r\n                Math.pow(parameterT, 2) * y1;\r\n            bezierDistance = Math.hypot(x0 - CurveVertexX, y0 - CurveVertexY);\r\n            if (bezierDistance <= mixDistance) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n    onClick: function(event) {\r\n        Setting.prototype.SelectElementId = this.data.id;\r\n    },\r\n    update: function(beginPoint, endPoint) {\r\n        this.beginPoint = beginPoint;\r\n        this.endPoint = endPoint;\r\n    },\r\n    living: function() {\r\n        let distanceX = Math.abs(this.data.beginPoint.x - this.data.endPoint.x);\r\n        let distanceY = Math.abs(this.data.beginPoint.y - this.data.endPoint.y);\r\n        let distance = Math.hypot(distanceX, distanceY);\r\n        let SinT = (this.data.beginPoint.x - this.data.endPoint.x) / distance;\r\n        let CosT = (this.data.beginPoint.y - this.data.endPoint.y) / distance;\r\n        let offsetX = 0;\r\n        let offsetY = 0;\r\n        if (distance > 230) {\r\n            offsetX = (distance - 230) * SinT * 0.2;\r\n            offsetY = (distance - 230) * CosT * 0.2;\r\n            if (offsetX > 0 && offsetX > 30) {\r\n                offsetX = 30;\r\n            }\r\n            if (offsetX < 0 && offsetX < -30) {\r\n                offsetX = -30;\r\n            }\r\n            if (offsetY > 0 && offsetY > 30) {\r\n                offsetY = 30;\r\n            }\r\n            if (offsetY < 0 && offsetY < -30) {\r\n                offsetY = -30;\r\n            }\r\n        }\r\n        if (distance < 130) {\r\n            offsetX = (distance - 130) * SinT * 0.2;\r\n            offsetY = (distance - 130) * CosT * 0.2;\r\n        }\r\n        if (!this.data.beginPoint.isActive) {\r\n            this.data.beginPoint.x -= offsetX;\r\n            this.data.beginPoint.y -= offsetY;\r\n        }\r\n        if (!this.data.endPoint.isActive) {\r\n            this.data.endPoint.x += offsetX;\r\n            this.data.endPoint.y += offsetY;\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/BezierLineElement.js","import { CircleElement } from \"./CircleElement\";\r\nimport { RectElement } from \"./RectElement\";\r\nimport { LineElement } from \"./LineElement\";\r\nimport { ElementStore } from \"./ElementStore\";\r\nimport { BezierLineElement } from \"./BezierLineElement\";\r\nimport { format } from \"util\";\r\n\r\nexport function ElementCreator() {}\r\nElementCreator.prototype = {\r\n    types: {\r\n        circle: function(data) {\r\n            return new CircleElement(data);\r\n        },\r\n        rect: function(data) {\r\n            return new RectElement(data);\r\n        },\r\n        line: function(data) {\r\n            return new LineElement(data);\r\n        },\r\n        BezierLine: function(data) {\r\n            return new BezierLineElement(data);\r\n        }\r\n    },\r\n    addElement: function(data) {\r\n        ElementStore.prototype.saveElement(\r\n            ElementCreator.prototype.types[data.type](data)\r\n        );\r\n    },\r\n    addLines: function(datas) {\r\n        let lines = [];\r\n        for (let l = 0; l < datas.length; l++) {\r\n            lines.push(ElementCreator.prototype.types[datas[l].type](datas[l]));\r\n        }\r\n        ElementStore.prototype.saveLines(lines);\r\n        console.log(ElementStore.prototype.elements);\r\n    },\r\n    addElements: function(datas) {\r\n        for (let l = 0; l < datas.length; l++) {\r\n            ElementCreator.prototype.addElement(datas[l]);\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/ElementCreator.js","const ProcessData = {};\r\nProcessData.getCircleDatas = function(nodes) {\r\n    let circles = [];\r\n    for (let l = 0; l < nodes.length; l++) {\r\n        let c = {};\r\n        c.type = \"circle\";\r\n        c.x = Math.ceil(50 + Math.random() * 700);\r\n        c.y = Math.ceil(50 + Math.random() * 700);\r\n        c.radius = 20;\r\n        c.width = 0;\r\n        c.height = 0;\r\n        Object.assign(c, nodes[l]);\r\n        circles.push(c);\r\n    }\r\n    return circles;\r\n};\r\nProcessData.getRectDatas = function(nodes) {\r\n    let rects = [];\r\n    for (let l = 0; l < nodes.length; l++) {\r\n        let rect = {};\r\n        rect.type = \"rect\";\r\n        rect.x = 50 + Math.random() * 700;\r\n        rect.y = 50 + Math.random() * 700;\r\n        rect.radius = 20;\r\n        rect.width = 50;\r\n        rect.height = 30;\r\n        Object.assign(rect, nodes[l]);\r\n        rects.push(rect);\r\n    }\r\n    return rects;\r\n};\r\nProcessData.getLineDatas = (nodes, relations) => {\r\n    let lines = [];\r\n    for (let l = 0; l < relations.length; l++) {\r\n        let line = {};\r\n        line.type = ProcessData.getLineType(relations[l], relations);\r\n        line.beginPoint =\r\n            nodes[ProcessData.getTargetPoint(nodes, relations[l].startNode)];\r\n        line.endPoint =\r\n            nodes[ProcessData.getTargetPoint(nodes, relations[l].endNode)];\r\n            Object.assign(line, relations[l]);\r\n            lines.push(line);\r\n    }\r\n    return lines;\r\n};\r\nProcessData.getTargetPoint = function(nodes, id) {\r\n    for (let l = 0; l < nodes.length; l++) {\r\n        if (nodes[l].id === id) {\r\n            return l;\r\n        }\r\n    }\r\n};\r\nProcessData.getLineType = function(rel, relations) {\r\n    for (let l = 0; l < relations.length; l++) {\r\n        if (\r\n            relations[l].endNode == rel.startNode &&\r\n            relations[l].startNode == rel.endNode\r\n        ) {\r\n            return \"BezierLine\";\r\n        }\r\n    }\r\n    return \"line\";\r\n};\r\nProcessData.test = function() {\r\n    alert(\"datas\");\r\n};\r\nexport default ProcessData;\n\n\n// WEBPACK FOOTER //\n// ./src/components/roleHandler/ProcessData.js","<template>\r\n  <div class=\"canvas-container\">\r\n    <input type=\"button\" value=\"backToStart\" @click=\"backToStart\"/>\r\n    <input type=\"button\" value=\"addData\" @click=\"addData\"/>\r\n    <canvas ref=\"canvas\" width=\"800\" height=\"800\" class=\"canvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { RoleController } from \"./roleHandler/RoleController\";\r\nimport { EventHandler } from \"./roleHandler/EventHandler\";\r\nimport { ElementCreator } from \"./roleHandler/ElementCreator\";\r\nimport ProcessData from \"./roleHandler/ProcessData\";\r\nimport { ElementStore } from \"./roleHandler/ElementStore\";\r\nexport default {\r\n  name: \"CanvasDemo\",\r\n  data() {\r\n    return {\r\n      nodes: [\r\n        {\r\n          id: 1,\r\n          name: \"1a\"\r\n        },\r\n        {\r\n          id: 2,\r\n          name: \"2b\"\r\n        },\r\n        {\r\n          id: 4,\r\n          name: \"4b\"\r\n        },\r\n        {\r\n          id: 5,\r\n          name: \"5b\"\r\n        },\r\n        {\r\n          id: 6,\r\n          name: \"6b\"\r\n        },\r\n        {\r\n          id: 7,\r\n          name: \"7b\"\r\n        }\r\n      ],\r\n      relationships: [\r\n        {\r\n          id: 12,\r\n          startNode: 1,\r\n          endNode: 2,\r\n          rel: \"1friends\"\r\n        },\r\n        {\r\n          id: 23,\r\n          startNode: 2,\r\n          endNode: 1,\r\n          rel: \"2friends\"\r\n        },\r\n        {\r\n          id: 45,\r\n          startNode: 4,\r\n          endNode: 5,\r\n          rel: \"4friends\"\r\n        },\r\n        {\r\n          id: 415,\r\n          startNode: 2,\r\n          endNode: 6,\r\n          rel: \"5friends\"\r\n        },\r\n        {\r\n          id: 400,\r\n          startNode: 7,\r\n          endNode: 5,\r\n          rel: \"5friends\"\r\n        },\r\n        {\r\n          id: 425,\r\n          startNode: 6,\r\n          endNode: 7,\r\n          rel: \"5friends\"\r\n        },\r\n        {\r\n          id: 416,\r\n          startNode: 7,\r\n          endNode: 6,\r\n          rel: \"5friends\"\r\n        },\r\n        {\r\n          id: 418,\r\n          startNode: 1,\r\n          endNode: 6,\r\n          rel: \"5friends\"\r\n        }\r\n      ],\r\n      elements: [\r\n        {\r\n          type: \"rect\",\r\n          bg: \"#ff0\",\r\n          border: \"#f0f\",\r\n          name: \"dsf\"\r\n        }\r\n      ],\r\n      circleDatas: [],\r\n      roleCtrl: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    addCircleEles(nodes, relationships) {\r\n      let circleDatas = ProcessData.getCircleDatas(nodes);\r\n      this.circleDatas.splice(0, 0, ...circleDatas);\r\n      ElementCreator.prototype.addElements(circleDatas);\r\n      this.addLines(relationships);\r\n    },\r\n    addLines(relationships) {\r\n      let lines = ProcessData.getLineDatas(this.circleDatas, relationships);\r\n      //this.lines.splice(0, 0, ...lines);\r\n      ElementCreator.prototype.addLines(lines);\r\n    },\r\n    backToStart() {\r\n      this.roleCtrl.backToStart();\r\n    },\r\n    addData() {\r\n      let nodes = [\r\n        {\r\n          id: 3,\r\n          name: \"b\"\r\n        }\r\n      ];\r\n      let rel = [\r\n        {\r\n          id: 43,\r\n          startNode: 2,\r\n          endNode: 3,\r\n          rel: \"friends\"\r\n        }\r\n      ];\r\n      this.addCircleEles(nodes, rel);\r\n    },\r\n    initCanvas() {\r\n      document.oncontextmenu = new Function(\"event.returnValue=false;\");\r\n      document.onselectstart = new Function(\"event.returnValue=false;\");\r\n      this.roleCtrl = new RoleController(this.$refs.canvas);\r\n      EventHandler.prototype.listen(\"eleClick\", function(a) {});\r\n      EventHandler.prototype.listen(\"drag\", (x, y, eventType) => {\r\n        this.roleCtrl.onDrag(x, y, eventType);\r\n      });\r\n      window.addEventListener(\r\n        \"mouseup\",\r\n        event => EventHandler.prototype.handleMouseUp(event),\r\n        false\r\n      );\r\n      this.$refs.canvas.addEventListener(\r\n        \"mousedown\",\r\n        event => EventHandler.prototype.handleMouseDown(event),\r\n        false\r\n      );\r\n      this.$refs.canvas.addEventListener(\r\n        \"mousemove\",\r\n        event => EventHandler.prototype.handleMouseMove(event),\r\n        false\r\n      );\r\n    },\r\n    resetData() {\r\n      let rects = ProcessData.getRectDatas(this.elements);\r\n      ElementCreator.prototype.addElements(rects);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.addCircleEles(this.nodes, this.relationships);\r\n    this.initCanvas();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.canvas-container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.canvas {\r\n  border: 1px dashed #ccc;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/CanvasDemo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-container\"},[_c('input',{attrs:{\"type\":\"button\",\"value\":\"backToStart\"},on:{\"click\":_vm.backToStart}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"addData\"},on:{\"click\":_vm.addData}}),_vm._v(\" \"),_c('canvas',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"width\":\"800\",\"height\":\"800\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-115dfcfe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/CanvasDemo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-115dfcfe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CanvasDemo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CanvasDemo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CanvasDemo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-115dfcfe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CanvasDemo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-115dfcfe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CanvasDemo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
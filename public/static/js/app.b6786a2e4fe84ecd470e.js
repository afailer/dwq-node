webpackJsonp([2],{"0mur":function(t,e){},LmQx:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-link",{key:"demo1",attrs:{to:"/"}},[this._v(" demo1 ")]),this._v(" "),e("router-link",{key:"demo2",attrs:{to:"/demo2"}},[this._v(" demo2 ")]),this._v(" "),e("keep-alive",[e("router-view")],1)],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},o,!1,function(t){a("0mur")},null,null).exports,r=a("/ocq");a("YP8n");i.a.use(r.a);var s=[{path:"/",name:"CanvasDemo",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"YP8n"))}},{path:"/demo2",name:"demo2",component:function(){return a.e(0).then(a.bind(null,"FBrj"))}}],l=new r.a({scrollBehavior:function(){return{y:0}},routes:s});i.a.config.productionTip=!1,new i.a({el:"#app",router:l,components:{App:n},template:"<App/>"})},YP8n:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Gu7T"),o=a.n(i);function n(){}function r(t){var e=this;this.canvas=t,this.pen=t.getContext("2d"),this.main_loop=function(){e.pen.clearRect(0,0,9999,9999);for(var t=0;t<n.prototype.elements.length;t++)n.prototype.elements[t].living(),n.prototype.elements[t].draw(e.pen);requestAnimationFrame(e.main_loop)},this.main_loop(),this.currentX=0,this.currentY=0,this.onDrag=function(t,a,i){if("down"==i)e.currentX=0,e.currentY=0;else{var o=t-e.currentX,n=a-e.currentY,s=!1;r.prototype.translateX+o<0?(r.prototype.translateX+=o,e.currentX=t,s=!0):o=0,r.prototype.translateY+n<0?(r.prototype.translateY+=n,e.currentY=a,s=!0):n=0,s&&e.pen.translate(o,n)}},this.backToStart=function(){e.pen.translate(-r.prototype.translateX,-r.prototype.translateY),r.prototype.translateX=0,r.prototype.translateY=0,n.prototype.resetData()}}n.prototype={elements:[],saveLines:function(t){var e;(e=n.prototype.elements).splice.apply(e,[0,0].concat(o()(t)))},saveElement:function(t){n.prototype.elements.push(t)},getElements:function(t){for(var e=[],a=0;a<n.prototype.elements.length;a++)n.prototype.elements[a].data.type==t&&e.push(n.prototype.elements[a]);return console.log(e),e},resetData:function(){console.log("resetData");for(var t=0;t<n.prototype.elements.length;t++)"circle"==n.prototype.elements[t].data.type&&(console.log(n.prototype.elements[t]),n.prototype.elements[t].data.x=parseInt(50+700*Math.random()),n.prototype.elements[t].data.y=parseInt(50+700*Math.random()),n.prototype.elements[t].old_x=n.prototype.elements[t].data.x,n.prototype.elements[t].old_y=n.prototype.elements[t].data.y)}},r.prototype={translateX:0,translateY:0};var s={};s.prototype={defaultBorder:.1,defaultBorderColor:"#ccc",RectBgColor:"#f0f",RectWidth:50,RectHeight:30,CircleBgColor:"#5CACEE",CircleRadius:24,CircleHoverBgColor:"#FFD39B",CircleSelectColor:"#FF8C69",CircleTextColor:"#333",CircleTextHoverColor:"#4876FF",CircleTextSelectColor:"#8B008B",CircleTextFont:"12",CircleTextSelectFont:"18",lineWidth:2,LineColor:"#333",lineSelectWidth:4,lineSelectColor:"#0fff00",lineHoverColor:"#9AFF9A",lineLabelWidth:50,lineLabelHeight:10,lineLabelBg:"#FFFFFF",lineTextMaxLength:5,lineLabelText:"#333",lineLabelTextFont:"14",lineLabelTextSelectFont:"18",hoverElementId:0,SelectElementId:0,bevel:20,bevelAngle:Math.PI/4};var l=s;function d(){}d.prototype={activeEle:"",startDragEvent:{onDrag:!1},startTime:"",clientList:{},listen:function(t,e){d.prototype.clientList[t]||(d.prototype.clientList[t]=[]),d.prototype.clientList[t].push(e)},trigger:function(){var t=Array.prototype.shift.call(arguments),e=d.prototype.clientList[t];if(!e||0===e.length)return!1;for(var a=0;a<e.length;a++)e[a].apply(this,arguments)},handleClick:function(t){for(var e=n.prototype.elements.length-1;e>=0;e--)n.prototype.elements[e].caculate(t)&&alert("ok")},handleMouseDown:function(t){for(var e=n.prototype.elements.length-1;e>=0;e--)if(n.prototype.elements[e].caculate(t))return d.prototype.startTime=(new Date).getTime(),d.prototype.activeEle=n.prototype.elements[e],void(d.prototype.activeEle.data.isActive=!0);""==d.prototype.activeEle&&(d.prototype.trigger("drag",0,0,"down"),d.prototype.startDragEvent.onDrag=!0,d.prototype.startDragEvent.offsetX=t.offsetX,d.prototype.startDragEvent.offsetY=t.offsetY)},handleMouseUp:function(){""!=d.prototype.activeEle&&(new Date).getTime()-this.startTime<300&&d.prototype.activeEle.onClick(),""!=d.prototype.activeEle&&(d.prototype.activeEle.data.isActive=!1),d.prototype.startDragEvent.onDrag=!1,this.activeEle=""},handleMouseMove:function(t){""!=this.activeEle&&this.activeEle.update(t),d.prototype.startDragEvent.onDrag&&d.prototype.onDrag(t);for(var e=n.prototype.elements.length-1;e>=0;e--){if(n.prototype.elements[e].caculate(t))return void(l.prototype.hoverElementId=n.prototype.elements[e].data.id);e==n.prototype.elements.length-1&&(l.prototype.hoverElementId=0)}},onDrag:function(t){var e=t.offsetX-d.prototype.startDragEvent.offsetX,a=t.offsetY-d.prototype.startDragEvent.offsetY;d.prototype.trigger("drag",e,a)}};var h=a("KmDb"),p=a.n(h);function c(){}function y(t){this.old_x=t.x,this.old_y=t.y,this.isActive=!1,this.data=t}function f(t){this.old_x=t.x,this.old_y=t.y,this.isActive=!1,this.data=t}function u(t){this.data=t}function v(t){this.data=t}c.prototype={changeTragetElement:function(t){for(var e=0;e<n.prototype.elements.length;e++)if(n.prototype.elements[e].data.id!=t.data.id&&n.prototype.elements[e].data.x){var a=Math.abs(t.data.x-n.prototype.elements[e].data.x),i=Math.abs(t.data.y-n.prototype.elements[e].data.y),o=p()(a,i),r=(t.data.x-n.prototype.elements[e].data.x)/o,s=(t.data.y-n.prototype.elements[e].data.y)/o;o<50&&(n.prototype.elements[e].data.x=n.prototype.elements[e].data.x-(50-o)*r*.1,n.prototype.elements[e].data.y=n.prototype.elements[e].data.y-(50-o)*s*.1)}},livingCycle:function(){for(var t="",e=0;e<n.prototype.elements.length;e++)n.prototype.elements[e].data.isActive&&(t=n.prototype.elements[e]);if(""!=t)for(var a=0;a<n.prototype.elements.length;a++)n.prototype.elements[a].data.linkNum==t.data.linkNum&&n.prototype.elements[a].data.id!=t.data.id&&n.prototype.elements[a].data;var i=Math.abs(this.data.beginPoint.x-this.data.endPoint.x),o=Math.abs(this.data.beginPoint.y-this.data.endPoint.y),r=p()(i,o),s=(this.data.beginPoint.x-this.data.endPoint.x)/r,l=this.data.beginPoint.y-this.data.endPoint.y;r>300&&(this.data.endPoint.x=this.data.endPoint.x+(r-300)*s*.01,this.data.endPoint.y=this.data.endPoint.y+(r-300)*l*.01)}},y.prototype={caculate:function(t){var e=t.offsetX-r.prototype.translateX-this.data.x,a=t.offsetY-r.prototype.translateY-this.data.y;return Math.sqrt(e*e+a*a)<l.prototype.CircleRadius},draw:function(t){t.beginPath(),t.arc(this.data.x,this.data.y,l.prototype.CircleRadius,0,2*Math.PI,!1),t.fillStyle=l.prototype.CircleBgColor,this.data.id==l.prototype.hoverElementId&&(t.fillStyle=l.prototype.CircleHoverBgColor),this.data.id==l.prototype.SelectElementId&&(t.fillStyle=l.prototype.CircleSelectColor),t.fill(),t.stroke();var e=this.data.name;t.fillStyle=l.prototype.CircleTextColor,t.font=l.prototype.CircleTextFont+"px Arial",this.data.id==l.prototype.hoverElementId&&(t.fillStyle=l.prototype.CircleTextHoverColor,t.font=l.prototype.CircleTextSelectFont+"px Arial"),this.data.id==l.prototype.SelectElementId&&(t.fillStyle=l.prototype.CircleTextSelectColor,t.font=l.prototype.CircleTextSelectFont+"px Arial"),t.textAlign="center",t.textBaseline="middle",t.fillText(e,this.data.x,this.data.y),t.closePath()},update:function(t){this.data.x=t.offsetX-r.prototype.translateX,this.data.y=t.offsetY-r.prototype.translateY,this.data.x-l.prototype.CircleRadius<0&&(this.data.x=l.prototype.CircleRadius),this.data.y-l.prototype.CircleRadius<0&&(this.data.y=l.prototype.CircleRadius)},living:function(){var t=.92*(this.data.x-this.old_x),e=.92*(this.data.y-this.old_y);this.old_x=this.data.x,this.old_y=this.data.y,this.data.isActive||(this.data.x+=t,this.data.y+=e),this.data.x-l.prototype.CircleRadius<0&&(this.data.x=l.prototype.CircleRadius,this.old_x=this.data.x+.2*t),this.data.y-l.prototype.CircleRadius<0&&(this.data.y=l.prototype.CircleRadius,this.old_y=this.data.y+.2*e),c.prototype.changeTragetElement(this)},addChildren:function(t){g.prototype.addElements(t)},onClick:function(){l.prototype.SelectElementId=this.data.id}},f.prototype={caculate:function(t){var e=t.offsetX-(this.data.x-this.data.width/2),a=t.offsetY-(this.data.y-this.data.height/2);if(e>0&&e<this.data.width&&a>0&&a<this.data.height)return!0},draw:function(t){t.beginPath(),t.lineWidth=.1,t.rect(this.data.x-this.data.width/2,this.data.y-this.data.height/2,this.data.width,this.data.height),t.fillStyle=this.data.bg,t.fill(),t.stroke()},update:function(t){this.data.x=t.offsetX,this.data.y=t.offsetY,this.data.x-this.data.width/2<0&&(this.data.x=this.data.width/2),this.data.y-this.data.height/2<0&&(this.data.y=this.data.height/2)},onClick:function(){d.prototype.trigger("eleClick","aaa")},living:function(){var t=.92*(this.data.x-this.old_x),e=.92*(this.data.y-this.old_y);this.old_x=this.data.x,this.old_y=this.data.y,this.data.isActive||(this.data.x+=t,this.data.y+=e),this.data.x-this.data.radius<0&&(this.data.x=this.data.radius,this.old_x=this.data.x+.2*t),this.data.y-this.data.radius<0&&(this.data.y=this.data.radius,this.old_y=this.data.y+.2*e),c.prototype.changeTragetElement(this)}},u.prototype={draw:function(t){t.beginPath(),t.lineWidth=l.prototype.lineWidth,t.strokeStyle=l.prototype.LineColor,this.data.id==l.prototype.hoverElementId&&(console.log(this.data.id+"----"),t.lineWidth=l.prototype.lineSelectWidth,t.strokeStyle=l.prototype.lineHoverColor),this.data.id==l.prototype.SelectElementId&&(t.lineWidth=l.prototype.lineSelectWidth,t.strokeStyle=l.prototype.lineSelectColor),t.moveTo(this.data.endPoint.x,this.data.endPoint.y),t.lineTo(this.data.beginPoint.x+this.data.beginPoint.width/2,this.data.beginPoint.y+this.data.beginPoint.height/2),t.stroke(),t.closePath();var e,a,i,o,n,r,s,d=this.data.endPoint.x,h=this.data.endPoint.y,c=this.data.beginPoint.x+this.data.beginPoint.width/2,y=this.data.beginPoint.y+this.data.beginPoint.height/2,f=p()(y-h,c-d),u=l.prototype.CircleRadius,v=d+u*(c-d)/f,g=h+u*(y-h)/f,m=l.prototype.bevel,x=l.prototype.bevelAngle;c>=d?(e=Math.asin((y-h)/f),s=f/2*Math.sin(e),r=f/2*Math.cos(e)):(e=Math.PI-Math.asin((y-h)/f),s=f/2*Math.sin(e),r=f/2*Math.cos(e)),c>=d&&(a=m*Math.cos(e-x/2),o=m*Math.sin(e-x/2),i=m*Math.cos(e+x/2),n=m*Math.sin(e+x/2)),c<d&&(a=m*Math.cos(Math.PI-e+x/2),o=m*Math.sin(Math.PI-e+x/2),i=m*Math.cos(Math.PI-e-x/2),n=m*Math.sin(Math.PI-e-x/2)),t.beginPath(),t.lineWidth=l.prototype.lineWidth,t.strokeStyle=l.prototype.LineColor,c>=d&&(t.moveTo(v+a,g+o),t.lineTo(v,g),t.lineTo(v+i,g+n),t.closePath()),c<d&&(t.moveTo(v-a,g+o),t.lineTo(v,g),t.lineTo(v-i,g+n),t.closePath()),t.fill();var P=l.prototype.lineLabelWidth,b=l.prototype.lineLabelHeight,M=void 0,C=void 0,T=p()(P,b)/2,E=Math.asin(b/2/T);t.save(),t.beginPath(),c>=d?(M=d+r-T*Math.cos(e+E),C=h+s-T*Math.sin(e+E),t.translate(M,C),t.rotate(e)):(M=d+r+T*Math.cos(e+E),C=h+s+T*Math.sin(e+E),t.translate(M,C),t.rotate(e-Math.PI)),this.rectOriginX=M,this.rectOriginY=C,this.rectWidth=P,this.rectHeight=b,t.rect(0,0,P,b),t.fillStyle=l.prototype.lineLabelBg,t.fill(),t.fillStyle=l.prototype.lineLabelText,t.font=l.prototype.lineLabelTextFont+"px Arial",this.data.id==l.prototype.hoverElementId&&(t.fillStyle=l.prototype.lineHoverColor,t.font=l.prototype.lineLabelTextSelectFont+"px Arial"),this.data.id==l.prototype.SelectElementId&&(t.fillStyle=l.prototype.lineSelectColor,t.font=l.prototype.lineLabelTextSelectFont+"px Arial");var S=l.prototype.lineTextMaxLength;t.textAlign="center",t.textBaseline="middle",this.data.rel.length>=S&&(this.data.rel=this.data.rel.replace(this.data.rel.substring(S),"...")),t.fillText(this.data.rel,P/2,b/2),t.closePath(),t.restore()},caculate:function(t){var e=this.data.endPoint.x,a=this.data.endPoint.y,i=this.data.beginPoint.x,o=this.data.beginPoint.y,n=t.offsetX-r.prototype.translateX,s=t.offsetY-r.prototype.translateY,l=p()(o-a,i-e),d=p()(s-a,n-e),h=p()(o-s,i-n),c=(l+d+h)/2,y=void 0;if(e==i){if(y=Math.abs(n-e),e==n)return!1}else if(a==o){if(y=Math.abs(s-a),a==s)return!1}else{if(e>i&&(n<=i||n>=e))return!1;if(e<i&&(n<=e||n>=i))return!1;y=2*Math.sqrt(c*(c-l)*(c-d)*(c-h))/l}if(y<=10)return!0},onClick:function(t){l.prototype.SelectElementId=this.data.id},update:function(t,e){this.beginPoint=t,this.endPoint=e},living:function(){var t=Math.abs(this.data.beginPoint.x-this.data.endPoint.x),e=Math.abs(this.data.beginPoint.y-this.data.endPoint.y),a=p()(t,e),i=(this.data.beginPoint.x-this.data.endPoint.x)/a,o=(this.data.beginPoint.y-this.data.endPoint.y)/a,n=0,r=0;a>250&&(r=(a-250)*o*.2,(n=(a-250)*i*.2)>0&&n>30&&(n=30),n<0&&n<-30&&(n=-30),r>0&&r>30&&(r=30),r<0&&r<-30&&(r=-30)),a<150&&(n=(a-150)*i*.2,r=(a-150)*o*.2),this.data.beginPoint.isActive||(this.data.beginPoint.x-=n,this.data.beginPoint.y-=r),this.data.endPoint.isActive||(this.data.endPoint.x+=n,this.data.endPoint.y+=r)}},v.prototype={draw:function(t){var e=(this.data.beginPoint.x+this.data.endPoint.x)/2,a=(this.data.beginPoint.y+this.data.endPoint.y)/2,i=p()(Math.abs(this.data.endPoint.x-this.data.beginPoint.x),Math.abs(this.data.endPoint.y-this.data.beginPoint.y)),o=(this.data.endPoint.x-this.data.beginPoint.x)/i,n=(this.data.endPoint.y-this.data.beginPoint.y)/i,r=e,s=a;t.beginPath(),t.lineWidth=l.prototype.lineWidth,t.strokeStyle=l.prototype.LineColor,this.data.id==l.prototype.hoverElementId&&(console.log(this.data.id+"----"),t.lineWidth=l.prototype.lineSelectWidth,t.strokeStyle=l.prototype.lineHoverColor),this.data.id==l.prototype.SelectElementId&&(t.lineWidth=l.prototype.lineSelectWidth,t.strokeStyle=l.prototype.lineSelectColor),t.moveTo(this.data.beginPoint.x,this.data.beginPoint.y);var d=parseInt(s+60*o),h=parseInt(r-60*n);t.quadraticCurveTo(h,d,this.data.endPoint.x,this.data.endPoint.y),t.stroke();var c,y,f,u,v,g,m=this.data.endPoint.x,x=this.data.endPoint.y,P=h,b=d,M=this.data.beginPoint.x,C=this.data.beginPoint.y,T=l.prototype.CircleRadius,E=m+T*(P-m)/p()(b-x,P-m),S=x+T*(b-x)/p()(b-x,P-m),w=l.prototype.bevel,L=l.prototype.bevelAngle,D=.25*(this.data.endPoint.x+this.data.beginPoint.x)+.5*h,I=.25*(this.data.endPoint.y+this.data.beginPoint.y)+.5*d;c=M>=m?Math.asin((I-x)/p()(I-x,D-m)):Math.PI-Math.asin((I-x)/p()(I-x,D-m)),M<m&&(y=w*Math.cos(Math.PI-c+L/2),u=w*Math.sin(Math.PI-c+L/2),f=w*Math.cos(Math.PI-c-L/2),v=w*Math.sin(Math.PI-c-L/2)),M>m&&(y=w*Math.cos(c-L/2),u=w*Math.sin(c-L/2),f=w*Math.cos(c+L/2),v=w*Math.sin(c+L/2)),t.lineWidth=l.prototype.lineWidth,t.fillStyle=l.prototype.LineColor,t.save(),t.beginPath(),M>=m&&(t.moveTo(E+y,S+u),t.lineTo(E,S),t.lineTo(E+f,S+v),t.closePath()),M<m&&(t.moveTo(E-y,S+u),t.lineTo(E,S),t.lineTo(E-f,S+v),t.closePath()),t.fill(),t.restore(),g=M>=m?Math.asin((C-x)/p()(C-x,M-m)):Math.PI-Math.asin((C-x)/p()(C-x,M-m));var k=l.prototype.lineLabelWidth,_=l.prototype.lineLabelHeight,A=p()(k,_)/2,F=void 0,N=void 0,Y=Math.asin(_/2/A);t.save(),t.beginPath(),M>m?(F=D-A*Math.cos(g+Y),N=I-A*Math.sin(g+Y),t.translate(F,N),t.rotate(g)):(F=D+A*Math.cos(g+Y),N=I+A*Math.sin(g+Y),t.translate(F,N),t.rotate(g-Math.PI)),t.rect(0,0,k,_),t.fillStyle=l.prototype.lineLabelBg,t.fill(),t.fillStyle=l.prototype.lineLabelText,t.font=l.prototype.lineLabelTextFont+"px Arial",this.data.id==l.prototype.hoverElementId&&(t.fillStyle=l.prototype.lineHoverColor,t.font=l.prototype.lineLabelTextSelectFont+"px Arial"),this.data.id==l.prototype.SelectElementId&&(t.fillStyle=l.prototype.lineSelectColor,t.font=l.prototype.lineLabelTextSelectFont+"px Arial");var W=l.prototype.lineTextMaxLength;t.textAlign="center",t.textBaseline="middle",this.data.rel.length>=W&&(this.data.rel=this.data.rel.replace(this.data.rel.substring(W),"...")),t.fillText(this.data.rel,k/2,_/2),t.closePath(),t.restore()},caculate:function(t){var e=this.data.endPoint.x,a=this.data.endPoint.y,i=this.data.beginPoint.x,o=this.data.beginPoint.y,n=t.offsetX-r.prototype.translateX,s=t.offsetY-r.prototype.translateY,l=p()(o-a,i-e),d=p()(s-a,n-e),h=p()(o-s,i-n),c=(l+d+h)/2,y=(i+e)/2,f=(o+a)/2,u=p()(Math.abs(e-i),Math.abs(a-o)),v=(a-o)/u,g=parseInt(f+60*((e-i)/u)),m=parseInt(y-60*v),x=void 0,P=void 0,b=void 0,M=void 0;if(e==i){if(x=Math.abs(n-e),P=Math.abs(s-o)/Math.abs(o-a),b=Math.pow(1-P,2)*i+2*P*(1-P)*m+Math.pow(P,2)*e,M=Math.pow(1-P,2)*o+2*P*(1-P)*g+Math.pow(P,2)*a,Math.abs(n-b)<=10)return!0}else if(a==o){if(x=Math.abs(s-a),P=Math.abs(n-i)/Math.abs(i-e),b=Math.pow(1-P,2)*i+2*P*(1-P)*m+Math.pow(P,2)*e,M=Math.pow(1-P,2)*o+2*P*(1-P)*g+Math.pow(P,2)*a,Math.abs(s-M)<=10)return!0}else if(n<i&&n>e||n<e&&n>i||s<o&&s>a||s<a&&s>o)return x=2*Math.sqrt(c*(c-l)*(c-d)*(c-h))/l,P=Math.sqrt(Math.pow(h,2)-Math.pow(x,2))/l,b=Math.pow(1-P,2)*i+2*P*(1-P)*m+Math.pow(P,2)*e,M=Math.pow(1-P,2)*o+2*P*(1-P)*g+Math.pow(P,2)*a,p()(n-b,s-M)<=10},onClick:function(t){l.prototype.SelectElementId=this.data.id},update:function(t,e){this.beginPoint=t,this.endPoint=e},living:function(){var t=Math.abs(this.data.beginPoint.x-this.data.endPoint.x),e=Math.abs(this.data.beginPoint.y-this.data.endPoint.y),a=p()(t,e),i=(this.data.beginPoint.x-this.data.endPoint.x)/a,o=(this.data.beginPoint.y-this.data.endPoint.y)/a,n=0,r=0;a>230&&(r=(a-230)*o*.2,(n=(a-230)*i*.2)>0&&n>30&&(n=30),n<0&&n<-30&&(n=-30),r>0&&r>30&&(r=30),r<0&&r<-30&&(r=-30)),a<130&&(n=(a-130)*i*.2,r=(a-130)*o*.2),this.data.beginPoint.isActive||(this.data.beginPoint.x-=n,this.data.beginPoint.y-=r),this.data.endPoint.isActive||(this.data.endPoint.x+=n,this.data.endPoint.y+=r)}};a("OMJi");function g(){}g.prototype={types:{circle:function(t){return new y(t)},rect:function(t){return new f(t)},line:function(t){return new u(t)},BezierLine:function(t){return new v(t)}},addElement:function(t){n.prototype.saveElement(g.prototype.types[t.type](t))},addLines:function(t){for(var e=[],a=0;a<t.length;a++)e.push(g.prototype.types[t[a].type](t[a]));n.prototype.saveLines(e),console.log(n.prototype.elements)},addElements:function(t){for(var e=0;e<t.length;e++)g.prototype.addElement(t[e])}};var m=a("woOf"),x=a.n(m),P={getCircleDatas:function(t){for(var e=[],a=0;a<t.length;a++){var i={type:"circle"};i.x=Math.ceil(50+700*Math.random()),i.y=Math.ceil(50+700*Math.random()),i.radius=20,i.width=0,i.height=0,x()(i,t[a]),e.push(i)}return e},getRectDatas:function(t){for(var e=[],a=0;a<t.length;a++){var i={type:"rect"};i.x=50+700*Math.random(),i.y=50+700*Math.random(),i.radius=20,i.width=50,i.height=30,x()(i,t[a]),e.push(i)}return e},getLineDatas:function(t,e){for(var a=[],i=0;i<e.length;i++){var o={};o.type=P.getLineType(e[i],e),o.beginPoint=t[P.getTargetPoint(t,e[i].startNode)],o.endPoint=t[P.getTargetPoint(t,e[i].endNode)],x()(o,e[i]),a.push(o)}return a},getTargetPoint:function(t,e){for(var a=0;a<t.length;a++)if(t[a].id===e)return a},getLineType:function(t,e){for(var a=0;a<e.length;a++)if(e[a].endNode==t.startNode&&e[a].startNode==t.endNode)return"BezierLine";return"line"},test:function(){alert("datas")}},b=P,M={name:"CanvasDemo",data:function(){return{nodes:[{id:1,name:"1a"},{id:2,name:"2b"},{id:4,name:"4b"},{id:5,name:"5b"},{id:6,name:"6b"},{id:7,name:"7b"}],relationships:[{id:12,startNode:1,endNode:2,rel:"1friends"},{id:23,startNode:2,endNode:1,rel:"2friends"},{id:45,startNode:4,endNode:5,rel:"4friends"},{id:415,startNode:2,endNode:6,rel:"5friends"},{id:400,startNode:7,endNode:5,rel:"5friends"},{id:425,startNode:6,endNode:7,rel:"5friends"},{id:416,startNode:7,endNode:6,rel:"5friends"},{id:418,startNode:1,endNode:6,rel:"5friends"}],elements:[{type:"rect",bg:"#ff0",border:"#f0f",name:"dsf"}],circleDatas:[],roleCtrl:""}},methods:{addCircleEles:function(t,e){var a,i=b.getCircleDatas(t);(a=this.circleDatas).splice.apply(a,[0,0].concat(o()(i))),g.prototype.addElements(i),this.addLines(e)},addLines:function(t){var e=b.getLineDatas(this.circleDatas,t);g.prototype.addLines(e)},backToStart:function(){this.roleCtrl.backToStart()},addData:function(){this.addCircleEles([{id:3,name:"b"}],[{id:43,startNode:2,endNode:3,rel:"friends"}])},initCanvas:function(){var t=this;document.oncontextmenu=new Function("event.returnValue=false;"),document.onselectstart=new Function("event.returnValue=false;"),this.roleCtrl=new r(this.$refs.canvas),d.prototype.listen("eleClick",function(t){}),d.prototype.listen("drag",function(e,a,i){t.roleCtrl.onDrag(e,a,i)}),window.addEventListener("mouseup",function(t){return d.prototype.handleMouseUp(t)},!1),this.$refs.canvas.addEventListener("mousedown",function(t){return d.prototype.handleMouseDown(t)},!1),this.$refs.canvas.addEventListener("mousemove",function(t){return d.prototype.handleMouseMove(t)},!1)},resetData:function(){var t=b.getRectDatas(this.elements);g.prototype.addElements(t)}},mounted:function(){this.addCircleEles(this.nodes,this.relationships),this.initCanvas()}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"canvas-container"},[e("input",{attrs:{type:"button",value:"backToStart"},on:{click:this.backToStart}}),this._v(" "),e("input",{attrs:{type:"button",value:"addData"},on:{click:this.addData}}),this._v(" "),e("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:"800",height:"800"}})])},staticRenderFns:[]};var T=a("VU/8")(M,C,!1,function(t){a("LmQx")},"data-v-115dfcfe",null);e.default=T.exports}},["NHnr"]);
//# sourceMappingURL=app.b6786a2e4fe84ecd470e.js.map